import{j as e,m as t,T as n,H as r,C as i}from"./ui-CyQrht5_.js";import{a as s,r as a,c as o,g as l,b as c,R as d,d as u,H as h,e as f}from"./vendor-BbYI5Q0V.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var p,m,g={},v=s;g.createRoot=v.createRoot,g.hydrateRoot=v.hydrateRoot,(m=p||(p={})).Unimplemented="UNIMPLEMENTED",m.Unavailable="UNAVAILABLE";class y extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const b=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),s=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},a=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=i,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==i(),n.isPluginAvailable=e=>{const t=a.get(e);return!!(null==t?void 0:t.platforms.has(i()))||!!s(e)},n.registerPlugin=(e,o={})=>{const l=a.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=i(),d=s(e);let u;const h=r=>{let i;const s=(...s)=>{const a=(async()=>(!u&&c in o?u=u="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!u&&"web"in o&&(u=u="function"==typeof o.web?await o.web():o.web),u))().then(t=>{const a=((t,r)=>{var i,s;if(!d){if(t)return null===(s=t[r])||void 0===s?void 0:s.bind(t);throw new y(`"${e}" plugin is not implemented on ${c}`,p.Unimplemented)}{const s=null==d?void 0:d.methods.find(e=>r===e.name);if(s)return"promise"===s.rtype?t=>n.nativePromise(e,r.toString(),t):(t,i)=>n.nativeCallback(e,r.toString(),t,i);if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t)}})(t,r);if(a){const e=a(...s);return i=null==e?void 0:e.remove,e}throw new y(`"${e}.${r}()" is not implemented on ${c}`,p.Unimplemented)});return"addListener"===r&&(a.remove=async()=>i()),a};return s.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(s,"name",{value:r,writable:!1,configurable:!1}),s},f=h("addListener"),m=h("removeListener"),g=(e,t)=>{const n=f({eventName:e},t),r=async()=>{const r=await n;m({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?g:f;case"removeListener":return m;default:return h(t)}}});return r[e]=v,a.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),v},n.Exception=y,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},w=(e=>e.Capacitor=b(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),_=w.registerPlugin;class x{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new w.Exception(e,p.Unimplemented)}unavailable(e="not available"){return new w.Exception(e,p.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const k=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),j=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class S extends x{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=j(n).trim(),r=j(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=k(e.key),n=k(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),s=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${s};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}_("CapacitorCookies",{web:()=>new S});const E=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,i)=>(n[r]=e[t[i]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class T extends x{async request(e){const t=E(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let s,a;return Array.isArray(i)?(a="",i.forEach(e=>{s=t?encodeURIComponent(e):e,a+=`${r}=${s}&`}),a.slice(0,-1)):(s=t?encodeURIComponent(i):i,a=`${r}=${s}`),`${e}&${a}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),s=i.headers.get("content-type")||"";let a,o,{responseType:l="text"}=i.ok?e:{};switch(s.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await i.blob(),a=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(o);break;case"json":a=await i.json();break;default:a=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:a,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var I,L,P,A;_("CapacitorHttp",{web:()=>new T}),(L=I||(I={})).Dark="DARK",L.Light="LIGHT",L.Default="DEFAULT",(A=P||(P={})).None="NONE",A.Slide="SLIDE",A.Fade="FADE";const O=_("StatusBar"),C=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-screen h-screen flex bg-gradient-to-b from-gray-900 to-purple-900 items-center justify-center px-20 flex-shrink-0",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h2",{className:"text-7xl font-bold pb-8 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Projects"}),e.jsx("p",{className:"text-2xl text-white mb-4",children:"that I spend late nights on"}),e.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-yellow-400 to-orange-400 mx-auto"})]})}),e.jsxs("div",{className:"w-screen h-screen flex items-center justify-center px-20 flex-shrink-0 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 to-purple-900"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-purple-900 to-transparent "}),e.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-12 items-center max-w-6xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-5xl font-bold mb-6 text-cyan-400",children:"Twirly App"}),e.jsx("p",{className:"text-xl text-white mb-6",children:"A real-time social comparison platform for mobile and web. Built with live voting system, TikTok-style infinite scroll, and mobile-first UI with smooth animations."}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-600 rounded-full text-sm",children:"React"}),e.jsx("span",{className:"px-3 py-1 bg-green-600 rounded-full text-sm",children:"Supabase"}),e.jsx("span",{className:"px-3 py-1 bg-purple-600 rounded-full text-sm",children:"PostgreSQL"}),e.jsx("span",{className:"px-3 py-1 bg-cyan-600 rounded-full text-sm",children:"Tailwind"}),e.jsx("span",{className:"px-3 py-1 bg-pink-600 rounded-full text-sm",children:"Framer Motion"})]}),e.jsx("a",{href:"https://twirlyapp.com",target:"_blank",className:"text-cyan-400 hover:text-cyan-300 font-semibold",children:"View Live Site →"})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg h-80 flex items-center justify-center",children:e.jsx("img",{src:"/assets/twirly-BSv-94DZ.png",alt:"Twirly App Screenshot",className:"rounded-lg w-full h-full object-cover"})})]})]}),e.jsxs("div",{className:"w-screen h-screen flex items-center justify-center px-20 flex-shrink-0 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-blue-900 to-purple-900 "}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900 to-transparent "}),e.jsxs("div",{className:"relative z-10grid md:grid-cols-2 gap-12 items-center max-w-6xl",children:[e.jsx("div",{className:"bg-gray-800 rounded-lg h-80 flex items-center justify-center",children:e.jsx("img",{src:"/assets/daywise-BMFrmnco.png",alt:"Daywise App Screenshot",className:"rounded-lg w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-5xl font-bold mb-6 text-pink-400",children:"Daywise"}),e.jsx("p",{className:"text-xl text-white mb-6",children:"An ADHD-friendly To-Do mobile app using LLMs for predictive, personalized tasking. Built with shared business logic for Android/iOS using Kotlin Multiplatform."}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-sm",children:"Kotlin Multiplatform"}),e.jsx("span",{className:"px-3 py-1 bg-yellow-600 rounded-full text-sm",children:"Hugging Face"}),e.jsx("span",{className:"px-3 py-1 bg-indigo-600 rounded-full text-sm",children:"GPT"}),e.jsx("span",{className:"px-3 py-1 bg-green-600 rounded-full text-sm",children:"ML"})]}),e.jsx("a",{href:"https://github.com/aakarshika/daywisehub",target:"_blank",className:"text-pink-400 hover:text-pink-300 font-semibold",children:"View App Code →"})]})]})]}),e.jsxs("div",{className:"w-screen h-screen flex items-center justify-center px-20 flex-shrink-0 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900 to-red-900"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900 to-transparent "}),e.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-12 items-center max-w-6xl",children:[e.jsx("div",{className:"bg-gray-800 rounded-lg h-80 flex items-center justify-center",children:e.jsx("img",{src:"/assets/portfolio_img-CDOQTQN7.png",alt:"Daywise App Screenshot",className:"rounded-lg w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-5xl font-bold mb-6 text-pink-400",children:"Portfolio"}),e.jsx("p",{className:"text-xl text-white mb-6",children:"This website!"}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-red-600 rounded-full text-sm",children:"React"}),e.jsx("span",{className:"px-3 py-1 bg-yellow-600 rounded-full text-sm",children:"Tailwind"}),e.jsx("span",{className:"px-3 py-1 bg-indigo-600 rounded-full text-sm",children:"Framer Motion"}),e.jsx("span",{className:"px-3 py-1 bg-green-600 rounded-full text-sm",children:"Github Pages"})]}),e.jsx("a",{href:"https://github.com/aakarshika/aakarshika.github.io/tree/main",target:"_blank",className:"text-pink-400 hover:text-pink-300 font-semibold",children:"View App Code →"})]})]})]})]}),N=(e,t={})=>{const{stopPropagation:n=!1,passive:r=!1}=t;return t=>{t.preventDefault(),n&&t.stopPropagation(),e(t)}},R=(e,t,n={})=>{const{useWindow:r=!1,useCapture:i=!1,stopPropagation:s=!1}=n,a=r?window:e,o={passive:!1,capture:i},l=t.wheel?((e,t={})=>{const{stopPropagation:n=!1,passive:r=!1}=t;return t=>{t.preventDefault(),n&&t.stopPropagation(),e(t)}})(t.wheel,{stopPropagation:s}):null,c=t.touchStart?N(t.touchStart,{stopPropagation:s}):null,d=t.touchMove?N(t.touchMove,{stopPropagation:s}):null;return l&&a.addEventListener("wheel",l,o),c&&a.addEventListener("touchstart",c,o),d&&a.addEventListener("touchmove",d,o),()=>{l&&a.removeEventListener("wheel",l,o),c&&a.removeEventListener("touchstart",c,o),d&&a.removeEventListener("touchmove",d,o)}},D=({id:t,isActive:n,progress:r,onScrollHandoff:i,children:s,slideCount:o=3,className:l="h-screen bg-gradient-to-r from-purple-900 to-black relative overflow-hidden",handleHover:c})=>{const d=a.useRef(null),[u,h]=a.useState(0),[f,p]=a.useState(null);return a.useEffect(()=>{f&&(i(f),p(null))},[f,i]),a.useEffect(()=>{if(!n)return;return R(d.current,{wheel:e=>{const t=2*e.deltaY;h(n=>{const r=n-t,i=-window.innerWidth*(o-1),s=Math.max(i,Math.min(0,r)),a=150;return e.deltaY>0&&n<=i+a&&r<i+a?(p("next"),Math.max(i,r)):e.deltaY<0&&n>=-150&&r>-150?(p("previous"),Math.min(0,r)):s})},touchStart:e=>{},touchMove:e=>{}},{useWindow:!0,useCapture:!1,stopPropagation:!1})},[n,o]),e.jsx("div",{className:l,children:e.jsx("div",{className:"h-screen flex items-center transition-all duration-1000 ease-out",onMouseEnter:()=>c(!0,t),onMouseLeave:()=>c(!1,t),children:e.jsx("div",{ref:d,className:"flex w-max h-full items-center",style:{transform:`translateX(${u}px)`,transition:"transform 0.1s ease-out"},children:s})})})},M=({id:t,isActive:n,onScrollHandoff:r,content:i,progress:s,handleHover:a})=>e.jsx(D,{id:t,isActive:n,progress:s,onScrollHandoff:r,slideCount:4,className:"h-screen  relative overflow-hidden",handleHover:a,children:i}),$=new Map,U=(e,t)=>{const{object:n,anim:r}=e;if(!r||!Array.isArray(r))return{};const i={},s={};return r.forEach(e=>{const{type:t}=e;t&&(s[t]||(s[t]=[]),s[t].push(e))}),Object.keys(s).forEach(e=>{const n=s[e];if("fade"===e||"slideX"===e||"slideY"===e){const r=(e=>{const t=JSON.stringify(e);if($.has(t))return $.get(t);const n=(e=>{var t;if(!e||0===e.length)return[];const n=[...e].sort((e,t)=>e.startTiming-t.startTiming),r=[];null==(t=n[0])||t.type;let i=0;return n.forEach((e,t)=>{const{initialValue:s,finalValue:a,startTiming:o,duration:l,type:c}=e;let d=a;if(void 0===d&&(d="fade"===c?1:"slideX"===c||"slideY"===c?0:1),0===t&&o>0)r.push({start:0,end:o,value:i,type:"fallback"});else if(t>0){const e=n[t-1],s=e.startTiming+e.duration;o>s&&r.push({start:s,end:o,value:i,type:"fallback"})}r.push({start:o,end:o+l,initialValue:s,finalValue:d,type:"animation"}),i=d}),r})(e);return $.set(t,n),n})(n),s=((e,t)=>{if(!e||0===e.length)return 0;for(const r of e)if(t>=r.start&&t<r.end){if("fallback"===r.type)return r.value;if("animation"===r.type){const e=(t-r.start)/(r.end-r.start);return r.initialValue+(r.finalValue-r.initialValue)*e}}const n=e[e.length-1];return"fallback"===n.type?n.value:"animation"===n.type?n.finalValue:0})(r,t);i[e]=s}else{let r=0;n.forEach(e=>{const n=((e,t)=>{const{type:n,initialValue:r,finalValue:i,startTiming:s,duration:a}=e;let o=i;return void 0===o&&(o="fade"===n?1:"slideX"===n||"slideY"===n?0:1),t<s?r:t>=s+a?o:r+(t-s)/a*(o-r)})(e,t);t>=e.startTiming&&t<=e.startTiming+e.duration&&(r=n)}),i[e]=r}}),i},V=(e,t)=>{if(!Array.isArray(e))return{};const n={};return e.forEach(e=>{const{object:r}=e;r&&(n[r]=U(e,t))}),n},F=({progress:n})=>{var r,i,s,a,o,l,c,d,u,h,f,p,m,g,v,y,b,w,_,x,k,j,S,E;const T=V([{object:"title",anim:[{type:"fade",initialValue:0,finalValue:.8,startTiming:0,duration:15},{type:"slideY",initialValue:50,finalValue:0,startTiming:0,duration:15}]},{object:"firstText",anim:[{type:"fade",initialValue:0,startTiming:8,duration:18},{type:"slideY",initialValue:30,finalValue:0,startTiming:8,duration:18}]},{object:"secondText",anim:[{type:"fade",initialValue:0,startTiming:18,duration:15},{type:"slideY",initialValue:20,finalValue:0,startTiming:18,duration:15}]},{object:"skills",anim:[{type:"fade",initialValue:0,startTiming:25,duration:12},{type:"slideY",initialValue:40,finalValue:0,startTiming:25,duration:12}]},{object:"skill1",anim:[{type:"fade",initialValue:0,startTiming:28,duration:10},{type:"slideX",initialValue:-100,finalValue:0,startTiming:28,duration:10}]},{object:"skill2",anim:[{type:"fade",initialValue:0,startTiming:30,duration:10},{type:"slideX",initialValue:100,finalValue:0,startTiming:30,duration:10}]},{object:"skill3",anim:[{type:"fade",initialValue:0,startTiming:32,duration:10},{type:"slideX",initialValue:-100,finalValue:0,startTiming:32,duration:10}]},{object:"skill4",anim:[{type:"fade",initialValue:0,startTiming:34,duration:10},{type:"slideX",initialValue:100,finalValue:0,startTiming:34,duration:10}]},{object:"aboutImage",anim:[{type:"fade",initialValue:0,finalValue:1,startTiming:0,duration:25},{type:"slideY",initialValue:-1e3,finalValue:0,startTiming:0,duration:45}]},{object:"laptopImage",anim:[{type:"fade",initialValue:0,finalValue:1,startTiming:35,duration:10},{type:"slideX",initialValue:200,finalValue:0,startTiming:35,duration:10}]},{object:"tableImage",anim:[{type:"fade",initialValue:0,finalValue:1,startTiming:45,duration:10},{type:"slideX",initialValue:200,finalValue:0,startTiming:45,duration:10}]}],n);return e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-b from-black to-gray-900 flex items-center justify-center py-20",children:[e.jsx(t.div,{style:{opacity:0==n?0:n/100},className:"absolute bottom-20 left-20 w-40 h-40 bg-purple-500 rounded-full opacity-40 blur-2xl"}),e.jsx(t.div,{style:{opacity:0==n?0:n/100},className:"absolute top-0 right-10 w-32 h-32 bg-blue-500 rounded-full opacity-40 blur-2xl"}),e.jsx("div",{className:"absolute right-0 top-0 bg-gray-800 rounded-lg h-full flex items-center justify-center"}),n>0&&e.jsxs("div",{className:"absolute about-section container mx-auto px-6 max-w-6xl",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-start mb-16",children:[e.jsxs("div",{children:[e.jsx(t.h2,{style:{opacity:(null==(r=T.title)?void 0:r.fade)||0,y:(null==(i=T.title)?void 0:i.slideY)||0},className:"text-6xl font-bold text-start mb-16 bg-gradient-to-r from-blue-400 to-gray-400 bg-clip-text text-transparent",children:"About Me"}),e.jsx(t.div,{style:{opacity:(null==(s=T.firstText)?void 0:s.fade)||0,y:(null==(a=T.firstText)?void 0:a.slideY)||0},className:"text-xl text-white leading-relaxed mb-6",children:"I'm building intelligent, cross-platform apps. Trying to combine real-time systems, elegant UX, and AI-driven features, hoping for clean code and bold experiences."}),e.jsx(t.div,{style:{opacity:(null==(o=T.secondText)?void 0:o.fade)||0},className:"text-lg text-white",children:"Engineer, system thinker, and AI whisperer."})]}),e.jsx("div",{children:e.jsxs("div",{className:"relative w-full h-96",children:[e.jsx(t.div,{style:{opacity:0==n?0:n/100},className:"absolute w-96 h-96 bg-pink-500 rounded-full opacity-35 blur-2xl"}),e.jsx(t.img,{src:"/assets/lapbase-D8j5TU7b.png",alt:"Laptop base Image",className:"rounded-lg w-full h-full object-cover absolute inset-0",style:{opacity:(null==(l=T.laptopImage)?void 0:l.fade)||0,x:(null==(c=T.laptopImage)?void 0:c.slideX)||0}}),e.jsx(t.img,{src:"/assets/winking_girl-BHY2YuAf.png",alt:"Winking Girl Image",className:"rounded-lg w-full h-full object-cover absolute inset-0",style:{opacity:n>55&&n<70&&(null==(d=T.aboutImage)?void 0:d.fade)||0,y:(null==(u=T.aboutImage)?void 0:u.slideY)||0}}),e.jsxs(t.div,{style:{opacity:(n<55||n>70)&&(null==(h=T.aboutImage)?void 0:h.fade)||0,y:(n<55||n>70)&&(null==(f=T.aboutImage)?void 0:f.slideY)||0},className:"rounded-lg w-full h-full object-cover absolute inset-0",children:[e.jsx("img",{src:"/assets/girl_main-Ci6PQ3Nv.png",alt:"Girl Main Image",className:"rounded-lg w-full h-full object-cover absolute inset-0"}),e.jsx("img",{src:"/assets/hand-CFjOmp96.png",alt:"Hand Image",className:"rounded-lg w-full h-full object-cover absolute inset-0"})]}),e.jsx(t.img,{src:"/assets/laptop-CRTBCi4t.png",alt:"Laptop Image",className:"rounded-lg w-full h-full object-cover absolute inset-0",style:{opacity:(null==(p=T.laptopImage)?void 0:p.fade)||0,x:(null==(m=T.laptopImage)?void 0:m.slideX)||0}}),e.jsx(t.img,{src:"/assets/table-BkX5JQ0t.png",alt:"Table Image",className:"rounded-lg w-full h-full object-cover absolute inset-0",style:{opacity:(null==(g=T.tableImage)?void 0:g.fade)||0,x:(null==(v=T.tableImage)?void 0:v.slideX)||0}})]})})]}),e.jsxs(t.div,{style:{opacity:(null==(y=T.skills)?void 0:y.fade)||0},className:"grid md:grid-cols-4 gap-8",children:[e.jsxs(t.div,{style:{opacity:(null==(b=T.skill1)?void 0:b.fade)||0,x:(null==(w=T.skill1)?void 0:w.slideX)||0},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Frontend"}),e.jsx("p",{className:"text-white",children:"React, Kotlin, Angular"})]}),e.jsxs(t.div,{style:{opacity:(null==(_=T.skill2)?void 0:_.fade)||0,x:(null==(x=T.skill2)?void 0:x.slideX)||0},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-green-500 rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Backend"}),e.jsx("p",{className:"text-white",children:"Node.js, Python, APIs, Java"})]}),e.jsxs(t.div,{style:{opacity:(null==(k=T.skill3)?void 0:k.fade)||0,x:(null==(j=T.skill3)?void 0:j.slideX)||0},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-red-500 rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Database"}),e.jsx("p",{className:"text-white",children:"MongoDB, PostgreSQL, MySQL"})]}),e.jsxs(t.div,{style:{opacity:(null==(S=T.skill4)?void 0:S.fade)||0,x:(null==(E=T.skill4)?void 0:E.slideX)||0},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cloud"}),e.jsx("p",{className:"text-white",children:"AWS, Vercel, Supabase"})]})]})]})]})};var W={exports:{}};const B=l(W.exports=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":
/*!******************************!*\
            !*** ./src/react-webcam.tsx ***!
            \******************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(
/*! react */
"react"),i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function a(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!=typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(n,r){t.call(navigator,e,n,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var o=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return i(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,a()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(a()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),i=e.minScreenshotWidth!==t.minScreenshotWidth,s=e.minScreenshotHeight!==t.minScreenshotHeight;(r||i||s)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,i=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var s=r/i;i=(r=n.minScreenshotWidth||this.video.clientWidth)/s,n.minScreenshotHeight&&i<n.minScreenshotHeight&&(r=(i=n.minScreenshotHeight)*s)}this.canvas=document.createElement("canvas"),this.canvas.width=(null==e?void 0:e.width)||r,this.canvas.height=(null==e?void 0:e.height)||i,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,o=this.canvas;return a&&o&&(o.width=(null==e?void 0:e.width)||o.width,o.height=(null==e?void 0:e.height)||o.height,n.mirrored&&(a.translate(o.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null==e?void 0:e.width)||o.width,(null==e?void 0:e.height)||o.height),n.mirrored&&(a.scale(-1,1),a.translate(-o.width,0))),o},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,i){var s={video:void 0===i||i};n.audio&&(s.audio=void 0===r||r),e.requestUserMediaId++;var a=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(s).then(function(n){e.unmounted||a!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var i=function(e){return{optional:[{sourceId:e}]}},s=function(e){var t=e.deviceId;return"string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"==typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var t=null,a=null;e.forEach(function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)});var o=s(n.audioConstraints);o&&(t=o);var l=s(n.videoConstraints);l&&(a=l),r(i(t),i(a))})}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,i=n.audio;n.forceScreenshotSourceSize;var a=n.disablePictureInPicture;n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing;var o=n.mirrored,l=n.style,c=void 0===l?{}:l,d=n.children,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=o?s(s({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",s({autoPlay:!0,disablePictureInPicture:a,src:t.src,muted:!i,playsInline:!0,ref:function(t){e.video=t},style:h},u)),d&&d(f))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=o},react:
/*!**************************************************************************************!*\
            !*** external {"root":"React","commonjs2":"react","commonjs":"react","amd":"react"} ***!
            \**************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e}}).default}(a)),H=({pictures:t,progress:i=0,size:s={width:210,height:190},currentFingerprint:a,onDelete:o})=>t&&0!==t.length?e.jsx("div",{className:"relative w-full h-full ",style:{scale:.8},children:e.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:"repeat(15, 1fr)"},children:t.slice(0,75).map((t,i)=>{const s=1-i%2*2,l=5*s*(i%3),c=a&&(null==t?void 0:t.fingerprint)===a;return e.jsxs("div",{className:""+(null==t||t.src,""),style:{zIndex:c?999:2,position:"relative",transform:(-1==s?"scale(1.2)":"scale(1)")+"  rotate("+l+"deg)"},children:[(null==t?void 0:t.src)&&"blank"!==(null==t?void 0:t.src)&&"heart"!==(null==t?void 0:t.src)&&e.jsxs("div",{className:"bg-white p-2 border border-gray-400 shadow-lg shadow-black-500/50 relative group",style:{position:"relative"},children:[e.jsx("img",{src:null==t?void 0:t.src,style:{objectFit:"cover"},onError:e=>{},alt:`Captured ${i+1}`,loading:"lazy"}),e.jsx("h4",{className:"text-xs text-blue-900",children:t.message}),c&&e.jsx("button",{onClick:e=>{o(t.object_name,t.id)},className:"absolute top-1 right-1 bg-gray-500 hover:bg-gray-600 text-white rounded-full p-1 opacity-100 transition-opacity duration-200 z-10",title:"Delete your image",children:e.jsx(n,{size:12})})]}),(null==t?void 0:t.src)&&"heart"===(null==t?void 0:t.src)&&e.jsx("div",{className:"p-2 relative group",style:{position:"relative"},children:e.jsx(r,{size:50,color:"transparent",fill:"rgb(249, 119, 143)"})})]},i+"-"+((null==t?void 0:t.src)||t))})})}):e.jsx("div",{className:"text-white text-sm",children:"No pictures yet."}),G={none:{label:"None",setup:(e,t,n)=>{n.source=t}},blur:{label:"Blur",setup:(e,t,n)=>{const r=e.effect("blur");r.amount=.07,r.source=t,n.source=r}},sepia:{label:"Sepia",setup:(e,t,n)=>{const r=e.effect("sepia");r.source=t,n.source=r}},tvglitch:{label:"TV Glitch",setup:(e,t,n)=>{const r=e.effect("tvglitch");r.source=t,n.source=r}},edge:{label:"Edge Detect",setup:(e,t,n)=>{const r=e.effect("edge");r.source=t,n.source=r}},vignette:{label:"Vignette",setup:(e,t,n)=>{const r=e.effect("vignette");r.amount=1,r.source=t,n.source=r}},filmgrain:{label:"Film Grain",setup:(e,t,n)=>{const r=e.effect("filmgrain");r.amount=.7,r.source=t,n.source=r}}},z=({progress:t,pictures:n,onCapture:r,currentFingerprint:s,onDelete:o})=>{const[l,c]=a.useState(!1),[d,u]=a.useState(0),[h,f]=a.useState(!1),p=a.useRef(null),m=a.useRef(null),[g,v]=a.useState("sepia"),[y,b]=a.useState(""),w=a.useRef(null),_=a.useRef(null),x=a.useRef(null),k=s&&n.some(e=>(null==e?void 0:e.fingerprint)===s);a.useEffect(()=>{if(!l)return;if(!window.Seriously)return;if(!p.current||!m.current)return;if(!p.current.video)return;w.current&&(w.current.destroy(),w.current=null);const e=new window.Seriously;w.current=e;const t=p.current.video,n=e.source(t),r=e.target(m.current);return _.current=n,x.current=r,G[g].setup(e,n,r),e.go(),()=>{e.destroy(),w.current=null}},[l,g]);const j=a.useCallback(()=>{f(!0),u(3);const e=setInterval(()=>{u(t=>t<=1?(clearInterval(e),f(!1),u(0),m.current&&requestAnimationFrame(()=>{const e=m.current.toDataURL("image/jpeg");r&&r(e,g,y),setTimeout(()=>{c(!1),b("")},120)}),0):t-1)},1e3)},[g,y,r]),S=a.useCallback(()=>{h||j()},[h,j]);return e.jsxs("div",{className:"tstart relative h-full w-full items-center justify-center mb-60",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full p-12 pt-60",children:e.jsx(H,{pictures:n,progress:t,currentFingerprint:s,onDelete:o})}),l&&!k&&e.jsxs("div",{className:"p-12 pt-60 h-full flex flex-col items-center justify-center gap-4 relative z-10",children:[e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("label",{className:"text-white",children:"Filter:"}),e.jsx("select",{value:g,onChange:e=>v(e.target.value),className:"rounded px-2 py-1 bg-gray-700 text-white",disabled:h,children:Object.entries(G).map(([t,n])=>e.jsx("option",{value:t,children:n.label},t))})]}),e.jsx(B,{audio:!1,ref:p,screenshotFormat:"image/jpeg",className:"rounded-lg w-64 h-64 object-cover absolute opacity-0 pointer-events-none",style:{zIndex:0},videoConstraints:{width:256,height:256}}),e.jsx("canvas",{ref:m,width:256,height:256,className:"rounded-lg w-64 h-64 object-cover",style:{zIndex:1}}),h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full w-32 h-32 flex items-center justify-center",children:e.jsx("span",{className:"text-6xl font-bold text-white",children:d})})}),e.jsxs("div",{className:"flex flex-col gap-2 w-64",children:[e.jsx("label",{className:"text-white text-sm",children:"Message (optional):"}),e.jsx("input",{type:"text",value:y,onChange:e=>b(e.target.value.slice(0,100)),placeholder:"Add a message...",maxLength:100,className:"rounded px-3 py-2 bg-gray-700 text-white text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h}),e.jsxs("div",{className:"text-xs text-white text-right",children:[y.length,"/100"]})]}),e.jsx("button",{className:"mt-4 px-4 py-2 rounded transition cursor-pointer "+(h?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),onClick:S,disabled:h,children:h?"Capturing...":"Capture"}),e.jsx("button",{className:"mt-2 px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 transition cursor-pointer",onClick:()=>{c(!1),b(""),f(!1),u(0)},disabled:h,children:"Cancel"})]}),!l&&!k&&e.jsx("div",{className:"p-12 pt-60 h-full flex items-center justify-center gap-4  z-2",onClick:()=>c(!0),children:e.jsx("div",{className:" items-center justify-center bg-gradient-to-b from-black to-gray-900 rounded-lg p-20 gap-4 z-10",children:e.jsx(i,{className:"w-10 h-10"})})})]})},J={},q=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in J)return;J[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};class Y extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Z extends Y{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class X extends Y{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class K extends Y{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Q,ee;(ee=Q||(Q={})).Any="any",ee.ApNortheast1="ap-northeast-1",ee.ApNortheast2="ap-northeast-2",ee.ApSouth1="ap-south-1",ee.ApSoutheast1="ap-southeast-1",ee.ApSoutheast2="ap-southeast-2",ee.CaCentral1="ca-central-1",ee.EuCentral1="eu-central-1",ee.EuWest1="eu-west-1",ee.EuWest2="eu-west-2",ee.EuWest3="eu-west-3",ee.SaEast1="sa-east-1",ee.UsEast1="us-east-1",ee.UsWest1="us-west-1",ee.UsWest2="us-west-2";var te=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class ne{constructor(e,{headers:t={},customFetch:n,region:r=Q.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>q(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return te(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:s}=t;let a,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):"string"==typeof s?(o["Content-Type"]="text/plain",a=s):"undefined"!=typeof FormData&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:a}).catch(e=>{throw new Z(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new X(c);if(!c.ok)throw new K(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"text/event-stream"===h?c:"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(r){return{data:null,error:r}}})}}var re={},ie={},se={},ae={},oe={},le={},ce=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const de=ce.fetch,ue=ce.fetch.bind(ce),he=ce.Headers,fe=ce.Request,pe=ce.Response,me=Object.freeze(Object.defineProperty({__proto__:null,Headers:he,Request:fe,Response:pe,default:ue,fetch:de},Symbol.toStringTag,{value:"Module"})),ge=c(me);var ve={};Object.defineProperty(ve,"__esModule",{value:!0});let ye=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ve.default=ye;var be=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(le,"__esModule",{value:!0});const we=be(ge),_e=be(ve);le.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=we.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,s=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,a=null,o=406,l="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null==i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,o=200,l="OK"),i&&this.shouldThrowOnError)throw new _e.default(i)}return{error:i,data:s,count:a,status:o,statusText:l}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var xe=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});const ke=xe(le);let je=class extends ke.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};oe.default=je;var Se=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});const Ee=Se(oe);let Te=class extends Ee.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};ae.default=Te;var Ie=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(se,"__esModule",{value:!0});const Le=Ie(ae);se.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new Le.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Le.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const s=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Le.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Le.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Le.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Pe={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.version=void 0,Ae.version="0.0.0-automated",Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.DEFAULT_HEADERS=void 0;const Oe=Ae;Pe.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Oe.version}`};var Ce=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});const Ne=Ce(se),Re=Ce(ae),De=Pe;ie.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},De.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Ne.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(s="POST",o=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Re.default({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Me=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0}),re.PostgrestError=re.PostgrestBuilder=re.PostgrestTransformBuilder=re.PostgrestFilterBuilder=re.PostgrestQueryBuilder=re.PostgrestClient=void 0;const $e=Me(ie);re.PostgrestClient=$e.default;const Ue=Me(se);re.PostgrestQueryBuilder=Ue.default;const Ve=Me(ae);re.PostgrestFilterBuilder=Ve.default;const Fe=Me(oe);re.PostgrestTransformBuilder=Fe.default;const We=Me(le);re.PostgrestBuilder=We.default;const Be=Me(ve);re.PostgrestError=Be.default;var He=re.default={PostgrestClient:$e.default,PostgrestQueryBuilder:Ue.default,PostgrestFilterBuilder:Ve.default,PostgrestTransformBuilder:Fe.default,PostgrestBuilder:We.default,PostgrestError:Be.default};const{PostgrestClient:Ge,PostgrestQueryBuilder:ze,PostgrestFilterBuilder:Je,PostgrestTransformBuilder:qe,PostgrestBuilder:Ye,PostgrestError:Ze}=He;let Xe;Xe="undefined"==typeof window?require("ws"):window.WebSocket;const Ke={"X-Client-Info":"realtime-js/2.11.10"};var Qe,et,tt,nt,rt,it,st,at,ot,lt,ct;(et=Qe||(Qe={}))[et.connecting=0]="connecting",et[et.open=1]="open",et[et.closing=2]="closing",et[et.closed=3]="closed",(nt=tt||(tt={})).closed="closed",nt.errored="errored",nt.joined="joined",nt.joining="joining",nt.leaving="leaving",(it=rt||(rt={})).close="phx_close",it.error="phx_error",it.join="phx_join",it.reply="phx_reply",it.leave="phx_leave",it.access_token="access_token",(st||(st={})).websocket="websocket",(ot=at||(at={})).Connecting="connecting",ot.Open="open",ot.Closing="closing",ot.Closed="closed";class dt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+i));s+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class ut{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(ct=lt||(lt={})).abstime="abstime",ct.bool="bool",ct.date="date",ct.daterange="daterange",ct.float4="float4",ct.float8="float8",ct.int2="int2",ct.int4="int4",ct.int4range="int4range",ct.int8="int8",ct.int8range="int8range",ct.json="json",ct.jsonb="jsonb",ct.money="money",ct.numeric="numeric",ct.oid="oid",ct.reltime="reltime",ct.text="text",ct.time="time",ct.timestamp="timestamp",ct.timestamptz="timestamptz",ct.timetz="timetz",ct.tsrange="tsrange",ct.tstzrange="tstzrange";const ht=(e,t,n={})=>{var r;const i=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((n,r)=>(n[r]=ft(r,e,t,i),n),{})},ft=(e,t,n,r)=>{const i=t.find(t=>t.name===e),s=null==i?void 0:i.type,a=n[e];return s&&!r.includes(s)?pt(s,a):mt(a)},pt=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return bt(t,n)}switch(e){case lt.bool:return gt(t);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return vt(t);case lt.json:case lt.jsonb:return yt(t);case lt.timestamp:return wt(t);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:default:return mt(t)}},mt=e=>e,gt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},vt=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yt=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},bt=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(i){r=s?s.split(","):[]}return r.map(e=>pt(t,e))}return e},wt=e=>"string"==typeof e?e.replace(" ","T"):e,_t=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class xt{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kt,jt,St,Et,Tt,It,Lt,Pt;(jt=kt||(kt={})).SYNC="sync",jt.JOIN="join",jt.LEAVE="leave";class At{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=At.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=At.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=At.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),s=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let i=e[t];if(!i)return;const s=n.map(e=>e.presence_ref);i=i.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Et=St||(St={})).ALL="*",Et.INSERT="INSERT",Et.UPDATE="UPDATE",Et.DELETE="DELETE",(It=Tt||(Tt={})).BROADCAST="broadcast",It.PRESENCE="presence",It.POSTGRES_CHANGES="postgres_changes",It.SYSTEM="system",(Pt=Lt||(Lt={})).SUBSCRIBED="SUBSCRIBED",Pt.TIMED_OUT="TIMED_OUT",Pt.CLOSED="CLOSED",Pt.CHANNEL_ERROR="CHANNEL_ERROR";class Ot{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new xt(this,rt.join,this.params,this.timeout),this.rejoinTimer=new ut(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new At(this),this.broadcastEndpointURL=_t(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s,private:a}}=this.params;this._onError(t=>null==e?void 0:e(Lt.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Lt.CLOSED));const o={},l={broadcast:i,presence:s,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,s=[];for(let n=0;n<i;n++){const i=r[n],{filter:{event:a,schema:o,table:l,filter:c}}=i,d=t&&t[n];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=tt.errored,void(null==e||e(Lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(Lt.SUBSCRIBED))}null==e||e(Lt.SUBSCRIBED)}).receive("error",t=>{this.state=tt.errored,null==e||e(Lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:s,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const r=new xt(this,rt.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),s}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new xt(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=rt;if(n&&[a,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let d=this._onMessage(s,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(d,n)):null===(i=this.bindings[s])||void 0===i||i.filter(e=>{var n,r,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:s}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:s};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Ot.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rt.close,{},e)}_onError(e){this._on(rt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ht(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ht(e.columns,e.old_record)),t}}const Ct=()=>{};class Nt{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ke,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ct,this.ref=0,this.logger=Ct,this.conn=null,this.sendBuffer=[],this.serializer=new dt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>q(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${st.websocket}`,this.httpEndpoint=_t(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ut(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Xe),this.transport){const e="undefined"!=typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new Rt(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(t=>t._joinRef!==e._joinRef),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qe.connecting:return at.Connecting;case Qe.open:return at.Open;case Qe.closing:return at.Closing;default:return at.Closed}}isConnected(){return this.connectionState()===at.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Ot(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),e.joinedOnce&&e._isJoined()&&e._push(rt.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(rt.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Rt{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qe.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Dt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class $t extends Dt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ut extends Dt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Vt=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const Ft=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>q(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Wt=e=>{if(Array.isArray(e))return e.map(e=>Wt(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Wt(n)}),t};var Bt=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const Ht=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gt=(e,t,n)=>Bt(void 0,void 0,void 0,function*(){const r=yield Vt(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield q(()=>Promise.resolve().then(()=>me),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{t(new $t(Ht(n),e.status||500))}).catch(e=>{t(new Ut(Ht(e),e))}):t(new Ut(Ht(e),e))});function zt(e,t,n,r,i,s){return Bt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,((e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))})(t,r,i,s)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>Gt(e,o,r))})})}function Jt(e,t,n,r){return Bt(this,void 0,void 0,function*(){return zt(e,"GET",t,n,r)})}function qt(e,t,n,r,i){return Bt(this,void 0,void 0,function*(){return zt(e,"POST",t,r,i,n)})}function Yt(e,t,n,r,i){return Bt(this,void 0,void 0,function*(){return zt(e,"DELETE",t,r,i,n)})}var Zt=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const Xt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qt{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ft(r)}uploadOrUpdate(e,t,n,r){return Zt(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Kt),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Zt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Kt.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:s}),l=yield o.json();if(o.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(Mt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Zt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield qt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new Dt("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Zt(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield qt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Zt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield qt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Zt(this,void 0,void 0,function*(){try{const r=yield qt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}download(e,t){return Zt(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Jt(this.fetch,`${this.url}/${n}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}info(e){return Zt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Jt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Wt(e),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}exists(e){return Zt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Bt(this,void 0,void 0,function*(){return zt(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Mt(n)&&n instanceof Ut){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}remove(e){return Zt(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Zt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Xt),t),{prefix:e||""});return{data:yield qt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const en={"X-Client-Info":"storage-js/2.7.1"};var tn=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class nn{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},en),t),this.fetch=Ft(n)}listBuckets(){return tn(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Mt(e))return{data:null,error:e};throw e}})}getBucket(e){return tn(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return tn(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return tn(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,i){return Bt(this,void 0,void 0,function*(){return zt(e,"PUT",t,r,i,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return tn(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return tn(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}}class rn extends nn{constructor(e,t={},n){super(e,t,n)}from(e){return new Qt(this.url,this.headers,e,this.fetch)}}let sn="";sn="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const an={headers:{"X-Client-Info":`supabase-js-${sn}/2.50.0`}},on={schema:"public"},ln={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cn={};var dn=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const un=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?ue:fetch),(...e)=>t(...e)})(n),i="undefined"==typeof Headers?he:Headers;return(n,s)=>dn(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},s),{headers:l}))})};var hn=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const fn="2.70.0",pn=3e4,mn=9e4,gn={"X-Client-Info":`gotrue-js/${fn}`},vn="X-Supabase-Api-Version",yn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},bn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class wn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function _n(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class xn extends wn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class kn extends wn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class jn extends wn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Sn extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class En extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tn extends jn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class In extends jn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ln extends jn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pn extends jn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function An(e){return _n(e)&&"AuthRetryableFetchError"===e.name}class On extends jn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Cn extends jn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rn=" \t\n\r=".split(""),Dn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rn.length;t+=1)e[Rn[t].charCodeAt(0)]=-2;for(let t=0;t<Nn.length;t+=1)e[Nn[t].charCodeAt(0)]=t;return e})();function Mn(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Nn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Nn[e]),t.queuedBits-=6}}function $n(e,t,n){const r=Dn[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Un(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)$n(e.charCodeAt(a),i,s);return t.join("")}function Vn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Fn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)$n(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Wn(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Vn(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Bn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Mn(e,n,r)),Mn(null,n,r),t.join("")}const Hn=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Gn={tested:!1,writable:!1},zn=()=>{if(!Hn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Gn.tested)return Gn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gn.tested=!0,Gn.writable=!0}catch(t){Gn.tested=!0,Gn.writable=!1}return Gn.writable};const Jn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>q(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},qn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Yn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Zn=async(e,t)=>{await e.removeItem(t)};class Xn{constructor(){this.promise=new Xn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Kn(e){const t=e.split(".");if(3!==t.length)throw new Cn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!bn.test(t[n]))throw new Cn("JWT not in base64url format");return{header:JSON.parse(Un(t[0])),payload:JSON.parse(Un(t[1])),signature:Fn(t[2]),raw:{header:t[0],payload:t[1]}}}function Qn(e){return("0"+e.toString(16)).substr(-2)}async function er(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function tr(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Qn).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await qn(e,`${t}-code-verifier`,i);const s=await er(r);return[s,r===s?"plain":"s256"]}Xn.promiseConstructor=Promise;const nr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const rr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ir(e){if(!rr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ar=[502,503,504];async function or(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Pn(sr(e),0);if(ar.includes(e.status))throw new Pn(sr(e),e.status);let r,i;try{r=await e.json()}catch(a){throw new kn(sr(a),a)}const s=function(e){const t=e.headers.get(vn);if(!t)return null;if(!t.match(nr))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(s&&s.getTime()>=yn.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new On(sr(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Sn}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new On(sr(r),e.status,r.weak_password.reasons);throw new xn(sr(r),e.status||500,i)}async function lr(e,t,n,r){var i;const s=Object.assign({},null==r?void 0:r.headers);s[vn]||(s[vn]=yn.name),(null==r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const a=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,s){const a=((e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Pn(sr(l),0)}o.ok||await or(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await or(l)}}(e,t,n+o,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function cr(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function dr(e){const t=cr(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ur(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function hr(e){return{data:e,error:null}}function fr(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function pr(e){return e}const mr=["global","local","others"];class gr{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Jn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=mr[0]){if(mr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mr.join(", ")}`);try{return await lr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_n(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await lr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ur})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await lr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:fr,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(_n(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await lr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ur})}catch(t){if(_n(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await lr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:pr});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(_n(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ir(e);try{return await lr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ur})}catch(t){if(_n(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ir(e);try{return await lr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ur})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){ir(e);try{return await lr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ur})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ir(e.userId);try{const{data:t,error:n}=await lr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(_n(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ir(e.userId),ir(e.id);try{return{data:await lr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_n(t))return{data:null,error:t};throw t}}}const vr={getItem:e=>zn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{zn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{zn()&&globalThis.localStorage.removeItem(e)}};function yr(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const br=!!(globalThis&&zn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class wr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _r extends wr{}async function xr(e,t,n){br&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),br&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw br&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _r(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(br)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}br&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{br&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const kr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function jr(e,t,n){return await n()}class Sr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sr.nextInstanceID,Sr.nextInstanceID+=1,this.instanceID>0&&Hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},kr),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new gr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Jn(r.fetch),this.lock=r.lock||jr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Hn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=xr:this.lock=jr,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:zn()?this.storage=vr:(this.memoryStorage={},this.storage=yr(this.memoryStorage)):(this.memoryStorage={},this.storage=yr(this.memoryStorage)),Hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fn}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Hn()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return _n(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _n(t)?{error:t}:{error:new kn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await lr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:cr}),{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(_n(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await tr(this.storage,this.storageKey)),i=await lr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:cr})}else{if(!("phone"in e))throw new Tn("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await lr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:cr})}}const{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(_n(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await lr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:dr})}else{if(!("phone"in e))throw new Tn("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await lr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:dr})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new En}}catch(t){if(_n(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,s,a,o,l,c,d,u,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let v;if(Hn())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await lr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Bn(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:cr});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new En}}catch(m){if(_n(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Yn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await lr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:cr});if(await Zn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new En}}catch(i){if(_n(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:s}=e,a=await lr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:cr}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new En}}catch(t){if(_n(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,s;try{if("email"in e){const{email:r,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await tr(this.storage,this.storageKey));const{error:o}=await lr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null==i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await lr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null==n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new Tn("You must provide either an email or phone number.")}catch(a){if(_n(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:a}=await lr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:cr});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(_n(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,s=null;return"pkce"===this.flowType&&([i,s]=await tr(this.storage,this.storageKey)),await lr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:hr})}catch(i){if(_n(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Sn;const{error:r}=await lr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(_n(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:s}=await lr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:s,error:a}=await lr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a}}throw new Tn("You must provide either an email or phone number and a type")}catch(t){if(_n(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<mn;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await lr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ur}):await this._useSession(async e=>{var t,n,r;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await lr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:ur}):{data:{user:null},error:new Sn}})}catch(t){if(_n(t))return function(e){return _n(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Sn;const s=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await tr(this.storage,this.storageKey));const{data:l,error:c}=await lr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:ur});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(_n(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sn;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:s}=Kn(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(_n(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Sn;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(_n(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Hn())throw new In("No browser detected.");if(e.error||e.error_description||e.error_code)throw new In(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ln("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new In("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ln("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&s&&l))throw new In("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=pn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(_n(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Yn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return _n(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await tr(this.storage,this.storageKey,!0));try{return await lr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(_n(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(_n(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await lr(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return Hn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(_n(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:s}=t;if(s)throw s;return await lr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(_n(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await lr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cr})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&An(t)&&Date.now()+n-i<pn},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(i){if(!r(s,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),_n(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Hn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Yn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<mn;if(this._debug(t,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),An(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Xn;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Sn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),_n(i)){const e={session:null,error:i};return An(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await qn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Zn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),pn);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/pn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof wr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await tr(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await lr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(_n(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await lr(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(_n(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:s,error:a}=await lr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(t){if(_n(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await lr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(_n(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Kn(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:r,error:i}=await lr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||0===r.keys.length)throw new Cn("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(t=>t.kid===e),!n)throw new Cn("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:s,raw:{header:a,payload:o}}=Kn(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:s},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,d,s,Wn(`${a}.${o}`))))throw new Cn("Invalid JWT signature");return{data:{claims:i,header:r,signature:s},error:null}}catch(n){if(_n(n))return{data:null,error:n};throw n}}}Sr.nextInstanceID=0;const Er=Sr;class Tr extends Er{constructor(e){super(e)}}var Ir=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class Lr{constructor(e,t,n){var r,i,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null==u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>hn(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:on,realtime:cn,auth:Object.assign(Object.assign({},ln),{storageKey:c}),global:an});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=d.auth)&&void 0!==s?s:{},this.headers,d.global.fetch),this.fetch=un(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Ge(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new ne(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ir(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:s,lock:a,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:s,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Nt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Pr=(e,t,n)=>new Lr(e,t,n),Ar="production";console.log("Current Environment Mode:",Ar);const Or=Ar,Cr="https://wdiqeeklfkxtschpaflv.supabase.co",Nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkaXFlZWtsZmt4dHNjaHBhZmx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ0MTQyODUsImV4cCI6MjA1OTk5MDI4NX0.gzsnIYOaOgc2wHN4qmNC6qYc35ajvTJHWH908pICWsk",Rr=void 0;console.log("Environment Config:",{environment:Or,apiUrl:Rr,supabaseUrl:Cr,supabaseAnonKey:Nr});const Dr=Pr(Cr,Nr),Mr="https://wdiqeeklfkxtschpaflv.supabase.co";console.log("Supabase URL:",Mr),console.log("Supabase Anon Key:","Present");try{new URL(Mr)}catch(Ms){throw new Error(`Invalid Supabase URL: ${Mr}`)}const $r=({progress:t,pictures:n,onCapture:r,currentFingerprint:i,onDelete:s})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black to-gray-900",style:{paddingBottom:"500px"},children:e.jsxs("div",{className:"relative w-full bg-gradient-to-b from-black to-gray-900",children:[e.jsx("div",{className:"absolute w-full h-screen tlan",children:e.jsx(z,{pictures:n,progress:t,onCapture:r,currentFingerprint:i,onDelete:s})}),e.jsxs("div",{className:"absolute top-10 left-1/2 transform -translate-x-1/2 z-10 text-center",children:[e.jsx("div",{className:" px-6 py-2 rounded-lg mb-4",children:e.jsx("h2",{className:"text-6xl font-bold bg-gradient-to-r from-red-400 to-yellow-400 bg-clip-text text-transparent",children:"If you want to,"})}),e.jsx("div",{className:" px-6 py-2 rounded-lg",children:e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-red-400 to-yellow-400 bg-clip-text text-transparent",children:"leave a heart"})})]})]})}),Ur=Pr("https://wdiqeeklfkxtschpaflv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkaXFlZWtsZmt4dHNjaHBhZmx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ0MTQyODUsImV4cCI6MjA1OTk5MDI4NX0.gzsnIYOaOgc2wHN4qmNC6qYc35ajvTJHWH908pICWsk"),Vr=()=>{const[t,n]=a.useState(!1),[r,i]=a.useState({name:"",message:""}),[s,o]=a.useState(!1),[l,c]=a.useState(null),d=e=>{const{name:t,value:n}=e.target;i(e=>({...e,[t]:n}))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-t from-purple-900 to-gray-900 py-20 flex items-center",children:e.jsxs("div",{className:"contact-section container mx-auto px-6 text-center",children:[e.jsx("h2",{className:"text-6xl font-bold mb-12 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Let's Work Together"}),e.jsx("p",{className:"text-2xl text-white mb-12 max-w-2xl mx-auto",children:"Ready to give me a call, a challenge or money?"}),t?e.jsxs("div",{className:"max-w-md mx-auto",children:["success"===l&&e.jsxs("div",{className:"mb-6 p-4 bg-green-900 border border-green-500 rounded-lg text-green-300",children:["Thank you ",r.name,"! Your message is sent."]}),"error"===l&&e.jsx("div",{className:"mb-6 p-4 bg-red-900 border border-red-500 rounded-lg text-red-300",children:"Sorry, there was an error sending your message. Please try again."}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r.name.trim()&&r.message.trim()){o(!0),c(null);try{const{data:e,error:t}=await Ur.from("contact_messages").insert([{name:r.name.trim(),message:r.message.trim()}]);if(t)throw console.error("Error submitting form:",t),c("error"),t;c("success"),setTimeout(()=>{i({name:"",message:""}),n(!1),c(null)},2e3)}catch(Ms){console.error("Error submitting form:",Ms),c("error")}finally{o(!1)}}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-white text-sm font-medium mb-2 text-left",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:d,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300",placeholder:"Your name",required:!0,disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-white text-sm font-medium mb-2 text-left",children:"Message"}),e.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:d,rows:4,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300 resize-none",placeholder:"Your message...",required:!0,disabled:s})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),i({name:"",message:""}),c(null)},className:"flex-1 px-6 py-3 border border-gray-600 rounded-lg text-white hover:border-white hover:text-white transition-all duration-300 font-medium",disabled:s,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s||!r.name.trim()||!r.message.trim(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg text-white font-medium hover:shadow-lg hover:shadow-purple-500/25 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Send Message"})]})]})]}):e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("button",{onClick:()=>{n(!0),c(null)},className:"bg-gradient-to-r from-purple-600 to-pink-600 px-8 py-4 rounded-full text-white font-semibold hover:shadow-lg hover:shadow-purple-500/25 transition-all duration-300",children:"Get In Touch"}),e.jsx("button",{onClick:()=>{window.open("/Resume_AakarshikaPriydarshi_SDE.pdf","_blank")},className:"border border-gray-600 px-8 py-4 rounded-full text-white hover:border-white hover:text-white transition-all duration-300",children:"View Resume"})]})]})})},Fr=({progress:n})=>{var r,i,s;const a=V([{object:"designerText",anim:[{type:"fade",initialValue:0,startTiming:51,duration:14},{type:"fade",initialValue:1,finalValue:0,startTiming:63,duration:1},{type:"slideX",initialValue:250,finalValue:0,startTiming:51,duration:14}]},{object:"mainComponent",anim:[{type:"fade",initialValue:1,finalValue:0,startTiming:80,duration:20},{type:"slideY",initialValue:0,finalValue:300,startTiming:65,duration:40}]}],n);return e.jsxs("div",{className:"h-screen relative flex items-center justify-center overflow-hidden",children:[e.jsxs(t.div,{className:"text-center z-10",style:{opacity:n>0?(null==(r=a.mainComponent)?void 0:r.fade)||1:0},children:[e.jsx(t.h1,{className:"text-8xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Aakarshika"}),e.jsx(t.span,{className:"text-2xl text-white mb-8",children:n<65?"Software Developer":"Software Developer, sometimes Designer"}),e.jsx(t.span,{className:"absolute text-2xl text-white mb-8 pointer-events-none",style:{x:`${(null==(i=a.designerText)?void 0:i.slideX)||200}px`,opacity:(null==(s=a.designerText)?void 0:s.fade)||0},children:", sometimes Designer"}),e.jsx(t.div,{className:"h-1 bg-gradient-to-r from-purple-400 to-pink-400 mx-auto mt-5",style:{width:`${n}%`,opacity:(100-n)/100}})]}),e.jsx(t.div,{style:{opacity:0==n?0:1-n/100},className:"absolute top-20 left-20 w-40 h-40 bg-purple-500 rounded-full opacity-40 blur-2xl"}),e.jsx(t.div,{style:{opacity:0==n?0:1-n/100},className:"absolute bottom-20 right-20 w-60 h-60 bg-pink-500 rounded-full opacity-35 blur-2xl"}),e.jsx(t.div,{style:{opacity:0==n?0:1-n/100},className:"absolute top-1/2 left-10 w-32 h-32 bg-blue-500 rounded-full opacity-40 blur-2xl"})]})},Wr=[{Skill:"node_js","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Expert",company:"MdThink"},{Skill:"postgresql","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Expert",company:"MdThink"},{Skill:"react","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"Twirly App"},{Skill:"kotlin_multiplatform","Start Date":"2023-10","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"Daywise"},{Skill:"android","Start Date":"2015-06","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"Multiple Projects"},{Skill:"hugging_face_transformers","Start Date":"2023-10","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"Daywise"},{Skill:"aws","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"typescript","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"MdThink"},{Skill:"angular","Start Date":"2019-04","End Date":"2022-12","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"swiftui","Start Date":"2022-06","End Date":"2024-06","Expertise Level Achieved":"Beginner",company:"Personal Projects"},{Skill:"machine_learning","Start Date":"2016-01","End Date":"2018-12","Expertise Level Achieved":"Advanced",company:"GMU"},{Skill:"unity","Start Date":"2021-06","End Date":"2023-12","Expertise Level Achieved":"Beginner",company:"Personal Projects"},{Skill:"blender","Start Date":"2021-06","End Date":"2023-12","Expertise Level Achieved":"Beginner",company:"Personal Projects"},{Skill:"python","Start Date":"2016-01","End Date":"2018-12","Expertise Level Achieved":"Advanced",company:"GMU"},{Skill:"mvvm","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"Daywise"},{Skill:"postgresql","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"aws_lambda","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"aws_ec2","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"aws_s3","Start Date":"2020-01","End Date":"2025-01","Expertise Level Achieved":"Advanced",company:"MdThink"},{Skill:"python","Start Date":"2016-01","End Date":"2018-12","Expertise Level Achieved":"Advanced",company:"GMU"},{Skill:"pytorch","Start Date":"2017-01","End Date":"2018-12","Expertise Level Achieved":"Intermediate",company:"GMU"},{Skill:"hugging_face_transformers","Start Date":"2024-01","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"Daywise"},{Skill:"nlp","Start Date":"2016-01","End Date":"2018-12","Expertise Level Achieved":"Intermediate",company:"GMU"},{Skill:"opencv","Start Date":"2016-01","End Date":"2018-12","Expertise Level Achieved":"Intermediate",company:"GMU"},{Skill:"scikit_learn","Start Date":"2017-01","End Date":"2018-12","Expertise Level Achieved":"Intermediate",company:"GMU"},{Skill:"pl_sql","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"MdThink"},{Skill:"query_optimization","Start Date":"2019-04","End Date":"2025-01","Expertise Level Achieved":"Intermediate",company:"MdThink"},{Skill:"gym_consistency","Start Date":"2022-03","End Date":"2025-06","Expertise Level Achieved":"Intermediate",description:"Finally figured out how to stick to a workout routine without getting bored. Started with basic strength training, then got into powerlifting. The key was finding exercises I actually enjoyed instead of forcing myself to do stuff I hated."},{Skill:"running_meditation","Start Date":"2023-01","End Date":"2025-06","Expertise Level Achieved":"Beginner",description:"Discovered that running is basically moving meditation. Started with short jogs around the neighborhood, gradually built up to longer distances. It's become my go-to way to clear my head and process ideas."},{Skill:"sleep_optimization","Start Date":"2022-08","End Date":"2025-06","Expertise Level Achieved":"Intermediate",description:"Realized I was chronically sleep-deprived and it was affecting everything. Started tracking sleep patterns, experimented with different routines, and finally found what works for me. Game changer for productivity and mood."},{Skill:"digital_detox","Start Date":"2023-06","End Date":"2025-06","Expertise Level Achieved":"Intermediate",description:"Got tired of being constantly distracted by my phone. Started with small changes like no phone in bedroom, then gradually reduced social media usage. Now I actually have time to think and be bored, which is surprisingly valuable."},{Skill:"creative_crafting","Start Date":"2021-12","End Date":"2025-06","Expertise Level Achieved":"Beginner",description:"Picked up woodworking and basic crafting as a way to work with my hands instead of just staring at screens. Started with simple projects, learned from mistakes, and discovered that building physical things is incredibly satisfying."},{Skill:"mindful_eating","Start Date":"2023-03","End Date":"2025-06","Expertise Level Achieved":"Beginner",description:"Stopped eating like I was in a race. Started paying attention to hunger cues, eating slower, and actually tasting my food. Sounds simple but it completely changed my relationship with food and energy levels."},{Skill:"nature_connection","Start Date":"2022-09","End Date":"2025-06","Expertise Level Achieved":"Beginner",description:"Started spending more time outdoors, even if it's just walking in local parks. Realized how disconnected I was from nature and how much it affects my mental state. Now I make it a point to get outside regularly."},{Skill:"stress_management","Start Date":"2022-11","End Date":"2025-06","Expertise Level Achieved":"Intermediate",description:"Developed a toolkit for handling stress that actually works for me. Breathing exercises, regular breaks, setting boundaries, and learning to say no. It's an ongoing process but I'm much better at recognizing when I'm overwhelmed."},{Skill:"ta","Start Date":"2020-08","End Date":"2021-06","Expertise Level Achieved":"Intermediate",company:"JSS Academy of Technical Education"}],Br=["tech.backend.python","tech.backend.python.django","tech.backend.python.django_rest_framework","tech.backend.python.pytest","tech.backend.python.flask","tech.machine_learning","tech.machine_learning.pandas","tech.machine_learning.ml","tech.machine_learning.computer_vision","tech.machine_learning.nlp","tech.backend.api","tech.backend.api.rest","tech.backend.api.graphql","tech.backend.api.grpc","tech.backend.api.openapi","tech.backend.api.swagger","tech.backend.api.postman","tech.backend.api.insomnia","tech.frontend.angularjs","tech.frontend.reactjs","tech.database.mysql","tech.database.mongodb","tech.database.redshift","tech.database.postgresql","tech.database.sqlite","tech.database.redis","tech.database.elasticsearch","tech.database.cassandra","tech.database.hbase","tech.database.neo4j","tech.devops.jenkins","tech.devops.docker","tech.devops.kubernetes","tech.devops.terraform","tech.devops.ansible","tech.devops.chef","tech.devops.localstack","tech.devops.aws.apache_kafka","tech.devops.aws.airflow","tech.devops.aws.apache_spark","tech.software.engineering","tech.teaching.ta","tech.backend.nodejs","tech.backend.python","tech.backend.api.rest","tech.frontend.reactjs","tech.frontend.angular","tech.frontend.kotlin","tech.frontend.swiftui","tech.frontend.typescript","tech.frontend.realtime.supabase_subscriptions","tech.frontend.realtime.websocket","tech.frontend.realtime.chartjs","tech.frontend.react.tailwind","tech.frontend.react.framer_motion","tech.frontend.react.pwa","tech.frontend.react.responsive_design","tech.frontend.a_b_testing","tech.frontend.react.scroll_animation","tech.frontend.mobile.kotlin_multiplatform","tech.frontend.mobile.android","tech.frontend.mobile.swiftui","tech.frontend.mobile.capacitor","tech.frontend.mobile.react_native","tech.database.postgresql","tech.database.postgresql.rls","tech.database.mongodb","tech.database.pl_sql","tech.database.query_optimization","tech.database.supabase","tech.devops.aws","tech.devops.aws.aws_ec2","tech.devops.aws.aws_lambda","tech.devops.aws.aws_s3","tech.devops.aws.aws_kinesis","tech.devops.aws.aws_rds","tech.devops.aws.aws_dynamodb","tech.devops.aws.aws_cloudfront","tech.devops.aws.aws_cloudwatch","tech.devops.cicd.jenkins","tech.devops.container.docker","tech.machine_learning","tech.machine_learning.pytorch","tech.machine_learning.hugging_face_transformers","tech.machine_learning.transformers","tech.machine_learning.nlp","tech.machine_learning.scikit_learn","tech.machine_learning.opencv","tech.machine_learning.fine_tuning","tech.backend.architecture.mvvm","tech.backend.architecture.microservices","tech.graphics.unity","tech.graphics.blender","tech.agile.process.agile","tech.agile.process.scrum","tech.agile.process.code_review","tech.agile.process.beta_testing","tech.agile.process.crash_reporting.sentry","mind_and_body.fitness.gym_consistency","mind_and_body.fitness.running_meditation","mind_and_body.fitness.strength_training","mind_and_body.fitness.cardio","mind_and_body.fitness.mobility","mind_and_body.wellness.sleep_optimization","mind_and_body.wellness.stress_management","mind_and_body.wellness.mindful_eating","mind_and_body.wellness.digital_detox","creativity.woodworking","creativity.nature_connection","creativity.creative_crafting","creativity.diy_projects","creativity.hand_skills","mind_and_body.nature.connection","mind_and_body.nature.outdoor_activities","mind_and_body.nature.walking","mind_and_body.nature.mindfulness","mind_and_body.personal.habit_building","mind_and_body.personal.boundary_setting","mind_and_body.personal.self_awareness","mind_and_body.personal.life_balance","mind_and_body.lifestyle.minimalism","mind_and_body.lifestyle.intentional_living","mind_and_body.lifestyle.work_life_balance","mind_and_body.lifestyle.energy_management"],Hr="awesomeness";function Gr(e,t){if(0===t)return"#6b7280";return`hsl(${360*e/t}, 85%, 50%)`}const zr=e=>new Date(e).getTime(),Jr=(e,t,n,r)=>(e-t)/n*(r-40)+20,qr=e=>e.toLowerCase().replace(/\s+/g,"_"),Yr=(e,t,n,r)=>{const i=[],s=qr(e);if(t.children&&0!==Object.keys(t.children).length)Object.values(t.children).forEach(e=>{const t=Yr(e.name,e,n,r);i.push(...t)});else{n[s]&&i.push(...n[s]);const e=Object.keys(r).find(e=>{const t=e.split(".").pop();return qr(t)===s});e&&r[e]&&r[e].forEach(e=>{const t=qr(e);n[t]&&i.push(...n[t])}),Object.keys(n).forEach(e=>{e===s&&i.push(...n[e])})}"teaching"!==t.name&&"ta"!==t.name&&"tech"!==t.name||console.log(t.name,i,"timelineData before deduplication");const a=[],o=new Set;return i.forEach(e=>{const t=`${e.startDate}-${e.endDate}-${e.company}`;o.has(t)||(o.add(t),a.push(e))}),"teaching"!==t.name&&"ta"!==t.name&&"tech"!==t.name||console.log(t.name,a,"uniqueData after deduplication"),a},Zr=(e,t,n,r)=>{const i={children:e.children?Object.fromEntries(Object.entries(e.children).map(([e,t])=>[e,{name:e,children:t.children||{}}])):{}},s=Yr(t,i,n,r);if(0===s.length)return null;const a={};return e.children&&Object.entries(e.children).forEach(([e,t])=>{const i=Zr(t,e,n,r);i&&(a[e]=i)}),{...e,children:a,timelineData:s}},Xr=(e,t,n,r)=>[...e].sort((e,t)=>zr(e.startDate)-zr(t.startDate)).map((e,i)=>{const s=Jr(zr(e.startDate),t,n,r),a=Jr(zr(e.endDate),t,n,r)-s;return{id:`period-${i}`,y:s,height:Math.max(a,10),startDate:e.startDate,endDate:e.endDate,expertise:e.expertise,company:e.company,description:e.description,periodIndex:i}}),Kr=(e=600)=>{console.log("initializing tree with timeline data");const t=(()=>{const e={};return Wr.forEach(t=>{const n=t.Skill,r=qr(n);e[r]||(e[r]=[]),e[r].push({startDate:t["Start Date"],endDate:t["End Date"],expertise:t["Expertise Level Achieved"],company:t.company,description:t["1 line Description on how I used it"]})}),e})(),n=(()=>{const e={},t={};return Wr.forEach(e=>{const n=qr(e.Skill);t[n]||(t[n]=[]),t[n].push(e.Skill)}),Br.forEach(n=>{const r=n.split("."),i=r[r.length-1],s=qr(i),a=[];t[s]&&a.push(...t[s]),Object.keys(t).forEach(e=>{(e.includes(s)||s.includes(e))&&a.push(...t[e])});const o=[...new Set(a)];o.length>0&&(e[n]=o)}),e})(),{tree:r}=(()=>{const e={};return Br.push(Hr),Br.forEach(t=>{t!==Hr&&(t=Hr+"."+t);const n=t.split(".");let r=e;n.forEach((e,t)=>{r[e]||(r[e]={name:e,children:{}}),r=r[e].children})}),{tree:e}})(),i={};Object.entries(r).forEach(([e,r])=>{const s=Zr(r,e,t,n);s&&(i[e]=s)});const s=Wr.flatMap(e=>[zr(e["Start Date"]),zr(e["End Date"])]),a=Math.min(...s),o=Math.max(...s),l=o-a,c=(r,i,s=null)=>{const o=s?`${s}-${i}`:i;let d=[];r.timelineData&&r.timelineData.length>0?d=Xr(r.timelineData,a,l,e):Object.keys(r.children).length>0&&(d=((e,t,n,r,i,s,a)=>{const o={children:e.children?Object.fromEntries(Object.entries(e.children).map(([e,t])=>[e,{name:e,children:t.children||{}}])):{}},l=Yr(t,o,n,r);return 0===l.length?[]:Xr(l,i,s,a)})(r,i,t,n,a,l,e));const u={},h=[];return Object.entries(r.children).forEach(([e,t])=>{const n=`${o}-${e}`,r=c(t,e,o);u[e]=r,h.push(n)}),{id:o,name:i,parentId:s,children:u,childIds:h,timelineData:r.timelineData||[],timelineBoxes:d,isLeaf:0===Object.keys(r.children).length,level:s?s.split("-").length:0,isHighlighted:!1,highlightedChildren:0,totalChildren:h.length}},d={};return Object.entries(i).forEach(([e,t])=>{d[e]=c(t,e)}),{tree:d,timeRange:{startTime:a,endTime:o,timeRange:l},yZoom:e,skillToTimeline:t,categoryToSkills:n}},Qr=e=>{const t=[],n=e=>{t.push({id:e.id,name:e.name,parentId:e.parentId,childIds:e.childIds,timelineData:e.timelineData,timelineBoxes:e.timelineBoxes,isLeaf:e.isLeaf,level:e.level,isHighlighted:e.isHighlighted,highlightedChildren:e.highlightedChildren,totalChildren:e.totalChildren}),Object.values(e.children).forEach(e=>{n(e)})};return Object.values(e.tree).forEach(e=>{n(e)}),t},ei=({flatNodes:e,removedNodeIds:t=[],nextNodeToRemove:n=null})=>{const r={width:1400,height:600,barWidth:30,padding:40},i=(e=>{if(!e||0===e.length)return{min:0,max:600};let t=1/0,n=-1/0;return e.forEach(e=>{e.timelineBoxes&&e.timelineBoxes.length>0&&e.timelineBoxes.forEach(e=>{t=Math.min(t,e.y),n=Math.max(n,e.y+e.height)})}),{min:t,max:n}})(e),s=(a=r.height,Array.from({length:12},(e,t)=>({y:a/12*t})));var a;const o=((e,t)=>Array.from({length:8},(n,r)=>{const i=e/8*r,s=t.max-(t.max-t.min)/8*r;return{y:i+15,label:new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short"})}}))(r.height,i),l=(e=>e.filter(e=>e.timelineBoxes&&e.timelineBoxes.length>0).slice(0,9))(e),c=(()=>{if(!e||0===e.length)return[];const n=new Set(t),i=t=>{const r=e.find(e=>e.id===t);if(!r)return 0;let s=0;if(n.has(t)&&(s+=1),r.childIds)for(const e of r.childIds)s+=i(e);return s},s=e.filter(e=>!n.has(e.id));if(0===s.length)return[];const a=s.filter(e=>{if(e.isLeaf)return!0;return e.childIds&&e.childIds.some(e=>n.has(e))});if(0===a.length)return[];const o=new Set(a.map(e=>e.id)),l=a.map(e=>{const t=e.childIds&&e.childIds.some(e=>o.has(e)),s=!t,a=(()=>{if(e.isLeaf)return r.barWidth;const t=i(e.id);return r.barWidth+10*t})();return{...e,isEffectivelyLeaf:s,hasVisibleChildren:t,barWidth:a,removedChildrenCount:e.childIds?e.childIds.filter(e=>n.has(e)).length:0,removedDescendantsCount:i(e.id)}}),{width:c,padding:d}=r,u=c-2*d,h=l.reduce((e,t)=>e+t.barWidth,0),f=l.length-1,p=f>0?(u-h)/f:0;let m=d;return l.map((e,t)=>{const n=m;return m+=e.barWidth+p,{...e,x:n+e.barWidth/2,barX:n,index:t}})})(),d={totalNodes:e.length,visibleNodes:c.length,removedNodes:t.length,leafNodes:e.filter(e=>e.isLeaf).length,parentNodes:e.filter(e=>!e.isLeaf).length,nodesWithTimeline:e.filter(e=>e.timelineBoxes&&e.timelineBoxes.length>0).length,effectivelyLeafNodes:c.filter(e=>e.isEffectivelyLeaf).length};return{dimensions:r,positionedBars:c,timeRange:i,gridLines:s,timeLabels:o,stats:d,nodesWithTimeline:l,getNodeColor:e=>((e,t=null)=>t&&e.id===t?{fill:"rgba(147, 51, 234, 0.7)",stroke:"rgba(147, 51, 234, 0.9)"}:e.isEffectivelyLeaf?{fill:"rgba(59, 130, 246, 0.7)",stroke:"rgba(59, 130, 246, 0.9)"}:{fill:"rgba(16, 185, 129, 0.7)",stroke:"rgba(16, 185, 129, 0.9)"})(e,n)}},ti=({isActive:t,flatNodes:n,handleScrollHandoff:r,handleHover:i})=>{const{removedNodeIds:s,removeNext:o,unremovePrevious:l,getNextNodeToRemove:c,isAllRemoved:d,isNoneRemoved:u}=(({flatNodes:e})=>{const[t,n]=a.useState([]),r=()=>{if(!e||0===e.length)return null;const n={};e.forEach(e=>{const t=e.level;n[t]||(n[t]=[]),n[t].push(e)});const r=Object.keys(n).map(Number).sort((e,t)=>t-e);for(const e of r){const r=n[e].find(e=>!t.includes(e.id));if(r)return r.id}return null};return{removedNodeIds:t,removeNext:()=>{try{const e=r();e&&n(t=>[...t,e])}catch(Ms){console.error("Error removing node:",Ms)}},unremovePrevious:()=>{if(0!==t.length)try{n(e=>e.slice(0,-1))}catch(Ms){console.error("Error unremoving node:",Ms)}},getNextNodeToRemove:()=>r(),isAllRemoved:()=>t.length===e.length,isNoneRemoved:()=>0===t.length}})({flatNodes:n}),h=a.useRef(null),f=c(),[p,m]=a.useState(!1),[g,v]=a.useState(0),{dimensions:y,positionedBars:b,timeLabels:w,gridLines:_}=ei({flatNodes:n,removedNodeIds:s,nextNodeToRemove:f}),{xOffset:x}=(({containerRef:e,currentNodeId:t,sensitivity:n=.5,maxOffset:r,isActive:i})=>{const[s,o]=a.useState(0),l=e;return a.useEffect(()=>{const s=e.current;if(!s||!t)return;const a=e=>{if(!i)return;const t=e.deltaY;o(e=>{const i=e+t*n;return Math.max(-1,Math.min(r+1,i))})};return s.addEventListener("wheel",a,{passive:!1}),()=>{s.removeEventListener("wheel",a),l.current&&clearTimeout(l.current)}},[e,t,n,r,i]),a.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]),{xOffset:s}})({containerRef:h,currentNodeId:f,sensitivity:.5,maxOffset:100*(n.length-1),isActive:t});a.useEffect(()=>{v(Math.floor(x/100))},[x]),a.useEffect(()=>{console.log("xOffset",x,"expectedIndex",g),x>=100*(n.length-1)?r("next"):x<=0&&r("previous")},[g]),a.useEffect(()=>{const e=s.length;if(e<g){const t=g-e;for(let e=0;e<t;e++)d()||o()}else if(e>=g){const t=e-g;for(let e=0;e<t;e++)u()||l()}},[g]);const k=x%100;if(!n||0===n.length)return e.jsx("div",{className:"flex items-center justify-center h-96 text-gray-400",children:"No data available"});const{width:j,height:S}=y,E=(()=>{if(!f)return null;const e=n.find(e=>e.id===f);if(!e||!e.parentId)return null;const t=n.find(t=>t.id===e.parentId);if(!t)return null;const r=n.filter(t=>t.parentId===e.parentId&&!s.includes(t.id)),i=b.filter(e=>r.some(t=>t.id===e.id)),a=b.find(e=>e.id===t.id),o=[];if(a&&o.push(a),o.push(...i),0===o.length)return null;const l=Math.min(...o.map(e=>e.barX));return{x:l-10,y:0,width:Math.max(...o.map(e=>e.barX+e.barWidth))-l+20,height:S,familyCount:o.length,hasParent:!!a,parentNode:a,siblingCount:i.length}})(),[T,I]=a.useState(!1);a.useEffect(()=>{i(!!T,"skill-graph")},[T]);const L=(()=>{if(!E)return null;if(E.hasParent){return Gr(b.findIndex(e=>e.name===E.parentNode.name),b.length)}{const e=b.findIndex(e=>e.id===f);return-1!==e?Gr(e,b.length):"black"}})();return e.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent",children:"Skills Timeline Bars"}),e.jsx("div",{className:"relative rounded-lg p-20 "+(T?"bg-white/10":""),onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:e.jsxs("svg",{ref:h,width:j+100,height:S,className:"block",children:[E&&e.jsx("rect",{x:E.x,y:E.y,width:E.width,height:E.height,fill:L,stroke:"rgba(255, 215, 0, 0.1)",strokeWidth:3,opacity:.3,rx:8}),E&&e.jsx("rect",{x:E.x,y:E.y,width:E.width,height:E.height,fill:"rgba(255, 255, 255, 0.5)",stroke:"rgba(255, 215, 0, 0.1)",strokeWidth:3,opacity:.3,rx:8}),_.map((t,n)=>e.jsx("line",{x1:0,y1:t.y,x2:j,y2:t.y,stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:1},`grid-${n}`)),w.map((t,n)=>e.jsx("text",{x:0,y:t.y,fill:"rgba(255, 255, 255, 0.6)",fontSize:"11",fontFamily:"monospace",children:t.label},`time-${n}`)),b.map((t,n)=>{const r=b.find(e=>e.id===t.parentId),i=(e=>{if(!e||e.length<=1)return e;const t=[...e].sort((e,t)=>new Date(e.startDate)-new Date(t.startDate)),n=[];let r={...t[0]};for(let i=1;i<t.length;i++){const e=t[i];new Date(r.endDate)>=new Date(e.startDate)?r={...r,endDate:new Date(Math.max(new Date(r.endDate),new Date(e.endDate))).toISOString(),companies:[...r.companies||[r.company],e.company],company:r.company}:(n.push(r),r={...e})}return n.push(r),n})(t.timelineBoxes),s=Gr(n,b.length),a=r?r.x:t.x,o=t.x-a;let l=t.barX,c=t.x,d=0,u=0;if(f===t.id){const e=o*(k/100);l-=e,c-=e,d=k/4*t.level*.2,u=k/4*t.level*.2}else t.removedChildrenCount>0&&(d=25*(t.level+1)*.2,u=25*(t.level+1)*.2);return e.jsx("g",{children:i&&i.map((n,r)=>{const i=n.height+u,a=t.barWidth+d;return e.jsxs("g",{children:[e.jsx("rect",{x:l-d/2,y:n.y-u/2,width:a,height:i,fill:s,stroke:"white",strokeWidth:1,rx:3}),e.jsx("text",{x:c,y:10*t.name.length>i?n.y-u-10*t.name.length/2:n.y+i/2,textAnchor:"middle",fill:"white",fontSize:"14",style:{transform:"rotate(-90deg)",transformOrigin:"center",transformBox:"fill-box"},fontFamily:"sans-serif",fontWeight:"600",dominantBaseline:8*t.name.length>i?"auto":"middle",children:t.name.replace(/_/g," ").toUpperCase()})]},`${t.id}-box-${r}`)})},t.id)})]})})]})},ni=({isActive:t,onScrollHandoff:n,handleHover:r})=>{const[i,s]=a.useState([]);a.useEffect(()=>{console.log("SkillGraph mounted");const e=Kr(600);s(Qr(e)),console.log(Qr(e),"flatNodes")},[]);const[o,l]=a.useState({visible:!1,data:null,position:{x:0,y:0}});return 0===i.length?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 to-black py-20",children:e.jsx("div",{className:"w-full h-full flex flex-col",children:e.jsx(ti,{isActive:t,flatNodes:i,handleScrollHandoff:n,handleHover:r})})})};var ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ri.apply(this,arguments)};function ii(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})}function si(e,t){var n,r,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function ai(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var oi="4.6.2";function li(e,t){return new Promise(function(n){return setTimeout(n,e,t)})}function ci(e){return!!e&&"function"==typeof e.then}function di(e,t){try{var n=e();ci(n)?n.then(function(e){return t(!0,e)},function(e){return t(!1,e)}):t(!0,n)}catch(Ms){t(!1,Ms)}}function ui(e,t,n){return void 0===n&&(n=16),ii(this,void 0,void 0,function(){var r,i,s,a;return si(this,function(o){switch(o.label){case 0:r=Array(e.length),i=Date.now(),s=0,o.label=1;case 1:return s<e.length?(r[s]=t(e[s],s),(a=Date.now())>=i+n?(i=a,[4,new Promise(function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)})]):[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return++s,[3,1];case 4:return[2,r]}})})}function hi(e){return e.then(void 0,function(){}),e}function fi(e){return parseInt(e)}function pi(e){return parseFloat(e)}function mi(e,t){return"number"==typeof e&&isNaN(e)?t:e}function gi(e){return e.reduce(function(e,t){return e+(t?1:0)},0)}function vi(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function yi(e,t){var n=e[0]>>>16,r=65535&e[0],i=e[1]>>>16,s=65535&e[1],a=t[0]>>>16,o=65535&t[0],l=t[1]>>>16,c=0,d=0,u=0,h=0;u+=(h+=s+(65535&t[1]))>>>16,h&=65535,d+=(u+=i+l)>>>16,u&=65535,c+=(d+=r+o)>>>16,d&=65535,c+=n+a,c&=65535,e[0]=c<<16|d,e[1]=u<<16|h}function bi(e,t){var n=e[0]>>>16,r=65535&e[0],i=e[1]>>>16,s=65535&e[1],a=t[0]>>>16,o=65535&t[0],l=t[1]>>>16,c=65535&t[1],d=0,u=0,h=0,f=0;h+=(f+=s*c)>>>16,f&=65535,u+=(h+=i*c)>>>16,h&=65535,u+=(h+=s*l)>>>16,h&=65535,d+=(u+=r*c)>>>16,u&=65535,d+=(u+=i*l)>>>16,u&=65535,d+=(u+=s*o)>>>16,u&=65535,d+=n*c+r*l+i*o+s*a,d&=65535,e[0]=d<<16|u,e[1]=h<<16|f}function wi(e,t){var n=e[0];32===(t%=64)?(e[0]=e[1],e[1]=n):t<32?(e[0]=n<<t|e[1]>>>32-t,e[1]=e[1]<<t|n>>>32-t):(t-=32,e[0]=e[1]<<t|n>>>32-t,e[1]=n<<t|e[1]>>>32-t)}function _i(e,t){0!==(t%=64)&&(t<32?(e[0]=e[1]>>>32-t,e[1]=e[1]<<t):(e[0]=e[1]<<t-32,e[1]=0))}function xi(e,t){e[0]^=t[0],e[1]^=t[1]}var ki=[4283543511,3981806797],ji=[3301882366,444984403];function Si(e){var t=[0,e[0]>>>1];xi(e,t),bi(e,ki),t[1]=e[0]>>>1,xi(e,t),bi(e,ji),t[1]=e[0]>>>1,xi(e,t)}var Ei=[2277735313,289559509],Ti=[1291169091,658871167],Ii=[0,5],Li=[0,1390208809],Pi=[0,944331445];function Ai(e,t){var n=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>127)return(new TextEncoder).encode(e);t[n]=r}return t}(e);t=t||0;var r,i=[0,n.length],s=i[1]%16,a=i[1]-s,o=[0,t],l=[0,t],c=[0,0],d=[0,0];for(r=0;r<a;r+=16)c[0]=n[r+4]|n[r+5]<<8|n[r+6]<<16|n[r+7]<<24,c[1]=n[r]|n[r+1]<<8|n[r+2]<<16|n[r+3]<<24,d[0]=n[r+12]|n[r+13]<<8|n[r+14]<<16|n[r+15]<<24,d[1]=n[r+8]|n[r+9]<<8|n[r+10]<<16|n[r+11]<<24,bi(c,Ei),wi(c,31),bi(c,Ti),xi(o,c),wi(o,27),yi(o,l),bi(o,Ii),yi(o,Li),bi(d,Ti),wi(d,33),bi(d,Ei),xi(l,d),wi(l,31),yi(l,o),bi(l,Ii),yi(l,Pi);c[0]=0,c[1]=0,d[0]=0,d[1]=0;var u=[0,0];switch(s){case 15:u[1]=n[r+14],_i(u,48),xi(d,u);case 14:u[1]=n[r+13],_i(u,40),xi(d,u);case 13:u[1]=n[r+12],_i(u,32),xi(d,u);case 12:u[1]=n[r+11],_i(u,24),xi(d,u);case 11:u[1]=n[r+10],_i(u,16),xi(d,u);case 10:u[1]=n[r+9],_i(u,8),xi(d,u);case 9:u[1]=n[r+8],xi(d,u),bi(d,Ti),wi(d,33),bi(d,Ei),xi(l,d);case 8:u[1]=n[r+7],_i(u,56),xi(c,u);case 7:u[1]=n[r+6],_i(u,48),xi(c,u);case 6:u[1]=n[r+5],_i(u,40),xi(c,u);case 5:u[1]=n[r+4],_i(u,32),xi(c,u);case 4:u[1]=n[r+3],_i(u,24),xi(c,u);case 3:u[1]=n[r+2],_i(u,16),xi(c,u);case 2:u[1]=n[r+1],_i(u,8),xi(c,u);case 1:u[1]=n[r],xi(c,u),bi(c,Ei),wi(c,31),bi(c,Ti),xi(o,c)}return xi(o,i),xi(l,i),yi(o,l),yi(l,o),Si(o),Si(l),yi(o,l),yi(l,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)}function Oi(e,t,n,r){var i=Object.keys(e).filter(function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(n,e)}),s=hi(ui(i,function(n){return function(e,t){var n=hi(new Promise(function(n){var r=Date.now();di(e.bind(null,t),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now()-r;if(!e[0])return n(function(){return{error:e[1],duration:i}});var s=e[1];if(function(e){return"function"!=typeof e}(s))return n(function(){return{value:s,duration:i}});n(function(){return new Promise(function(e){var t=Date.now();di(s,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=i+Date.now()-t;if(!n[0])return e({error:n[1],duration:s});e({value:n[1],duration:s})})})})})}));return function(){return n.then(function(e){return e()})}}(e[n],t)},r));return function(){return ii(this,void 0,void 0,function(){var e,t,n,a;return si(this,function(o){switch(o.label){case 0:return[4,s];case 1:return[4,ui(o.sent(),function(e){return hi(e())},r)];case 2:return e=o.sent(),[4,Promise.all(e)];case 3:for(t=o.sent(),n={},a=0;a<i.length;++a)n[i[a]]=t[a];return[2,n]}})})}}function Ci(){var e=window,t=navigator;return gi(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Ni(){var e=window,t=navigator;return gi(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===(t.vendor||"").indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Ri(){var e=window;return gi(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===navigator.vendor.indexOf("Apple"),"RGBColor"in e,"WebKitMediaKeys"in e])>=4}function Di(){var e=window,t=e.HTMLElement,n=e.Document;return gi(["safari"in e,!("ongestureend"in e),!("TouchEvent"in e),!("orientation"in e),t&&!("autocapitalize"in t.prototype),n&&"pointerLockElement"in n.prototype])>=4}function Mi(){var e,t=window;return e=t.print,/^function\s.*?\{\s*\[native code]\s*}$/.test(String(e))&&"[object WebPageNamespace]"===String(t.browser)}function $i(){var e,t,n=window;return gi(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function Ui(){var e=window,t=navigator,n=e.CSS,r=e.HTMLButtonElement;return gi([!("getStorageUpdates"in t),r&&"popover"in r.prototype,"CSSCounterStyleRule"in e,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function Vi(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function Fi(){var e=Ni(),t=$i(),n=window,r=navigator,i="connection";return e?gi([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:!!t&&gi(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2}function Wi(e){var t=new Error(e);return t.name=e,t}function Bi(e,t,n){var r,i,s;return void 0===n&&(n=50),ii(this,void 0,void 0,function(){var a,o;return si(this,function(l){switch(l.label){case 0:a=document,l.label=1;case 1:return a.body?[3,3]:[4,li(n)];case 2:return l.sent(),[3,1];case 3:o=a.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise(function(e,n){var r=!1,i=function(){r=!0,e()};o.onload=i,o.onerror=function(e){r=!0,n(e)};var s=o.style;s.setProperty("display","block","important"),s.position="absolute",s.top="0",s.left="0",s.visibility="hidden",t&&"srcdoc"in o?o.srcdoc=t:o.src="about:blank",a.body.appendChild(o);var l=function(){var e,t;r||("complete"===(null===(t=null===(e=o.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(l,10))};l()})];case 5:l.sent(),l.label=6;case 6:return(null===(i=null===(r=o.contentWindow)||void 0===r?void 0:r.document)||void 0===i?void 0:i.body)?[3,8]:[4,li(n)];case 7:return l.sent(),[3,6];case 8:return[4,e(o,o.contentWindow)];case 9:return[2,l.sent()];case 10:return null===(s=o.parentNode)||void 0===s||s.removeChild(o),[7];case 11:return[2]}})})}function Hi(e){for(var t=function(e){for(var t,n,r="Unexpected syntax '".concat(e,"'"),i=/^\s*([a-z-]*)(.*)$/i.exec(e),s=i[1]||void 0,a={},o=/([.:#][\w-]+|\[.+?\])/gi,l=function(e,t){a[e]=a[e]||[],a[e].push(t)};;){var c=o.exec(i[2]);if(!c)break;var d=c[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":var u=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(!u)throw new Error(r);l(u[1],null!==(n=null!==(t=u[4])&&void 0!==t?t:u[5])&&void 0!==n?n:"");break;default:throw new Error(r)}}return[s,a]}(e),n=t[0],r=t[1],i=document.createElement(null!=n?n:"div"),s=0,a=Object.keys(r);s<a.length;s++){var o=a[s],l=r[o].join(" ");"style"===o?Gi(i.style,l):i.setAttribute(o,l)}return i}function Gi(e,t){for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],s=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(i);if(s){var a=s[1],o=s[2],l=s[4];e.setProperty(a,o,l||"")}}}var zi=["monospace","sans-serif","serif"],Ji=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function qi(e){return e.toDataURL()}var Yi,Zi;function Xi(){var e=this;return function(){if(void 0===Zi){var e=function(){var t=Ki();Qi(t)?Zi=setTimeout(e,2500):(Yi=t,Zi=void 0)};e()}}(),function(){return ii(e,void 0,void 0,function(){var e;return si(this,function(t){switch(t.label){case 0:return Qi(e=Ki())?Yi?[2,ai([],Yi,!0)]:(n=document).fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement?[4,Vi()]:[3,2]:[3,2];case 1:t.sent(),e=Ki(),t.label=2;case 2:return Qi(e)||(Yi=e),[2,e]}var n})})}}function Ki(){var e=screen;return[mi(pi(e.availTop),null),mi(pi(e.width)-pi(e.availWidth)-mi(pi(e.availLeft),0),null),mi(pi(e.height)-pi(e.availHeight)-mi(pi(e.availTop),0),null),mi(pi(e.availLeft),null)]}function Qi(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function es(e){var t;return ii(this,void 0,void 0,function(){var n,r,i,s,a,o,l;return si(this,function(c){switch(c.label){case 0:for(n=document,r=n.createElement("div"),i=new Array(e.length),s={},ts(r),l=0;l<e.length;++l)"DIALOG"===(a=Hi(e[l])).tagName&&a.show(),ts(o=n.createElement("div")),o.appendChild(a),r.appendChild(o),i[l]=a;c.label=1;case 1:return n.body?[3,3]:[4,li(50)];case 2:return c.sent(),[3,1];case 3:n.body.appendChild(r);try{for(l=0;l<e.length;++l)i[l].offsetParent||(s[e[l]]=!0)}finally{null===(t=r.parentNode)||void 0===t||t.removeChild(r)}return[2,s]}})})}function ts(e){e.style.setProperty("visibility","hidden","important"),e.style.setProperty("display","block","important")}function ns(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function rs(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function is(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function ss(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function as(e){return matchMedia("(prefers-reduced-transparency: ".concat(e,")")).matches}function os(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var ls=Math,cs=function(){return 0};var ds={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var us=function(){for(var e=window;;){var t=e.parent;if(!t||t===e)return!1;try{if(t.location.origin!==e.location.origin)return!0}catch(Ms){if(Ms instanceof Error&&"SecurityError"===Ms.name)return!0;throw Ms}e=t}};var hs=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),fs=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),ps=["FRAGMENT_SHADER","VERTEX_SHADER"],ms=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],gs="WEBGL_debug_renderer_info";function vs(e){if(e.webgl)return e.webgl.context;var t,n=document.createElement("canvas");n.addEventListener("webglCreateContextError",function(){return t=void 0});for(var r=0,i=["webgl","experimental-webgl"];r<i.length;r++){var s=i[r];try{t=n.getContext(s)}catch(a){}if(t)break}return e.webgl={context:t},t}function ys(e,t,n){var r=e.getShaderPrecisionFormat(e[t],e[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function bs(e){return Object.keys(e.__proto__).filter(ws)}function ws(e){return"string"==typeof e&&!e.match(/[^A-Z0-9_x]/)}function _s(){return $i()}function xs(){return Ni()||Ri()}function ks(e){return"function"==typeof e.getParameter}var js={fonts:function(){var e=this;return Bi(function(t,n){var r=n.document;return ii(e,void 0,void 0,function(){var e,t,n,i,s,a,o,l,c,d,u;return si(this,function(h){for((e=r.body).style.fontSize="48px",(t=r.createElement("div")).style.setProperty("visibility","hidden","important"),n={},i={},s=function(e){var n=r.createElement("span"),i=n.style;return i.position="absolute",i.top="0",i.left="0",i.fontFamily=e,n.textContent="mmMwWLliI0O&1",t.appendChild(n),n},a=function(e,t){return s("'".concat(e,"',").concat(t))},o=function(){for(var e={},t=function(t){e[t]=zi.map(function(e){return a(t,e)})},n=0,r=Ji;n<r.length;n++){t(r[n])}return e},l=function(e){return zi.some(function(t,r){return e[r].offsetWidth!==n[t]||e[r].offsetHeight!==i[t]})},c=function(){return zi.map(s)}(),d=o(),e.appendChild(t),u=0;u<zi.length;u++)n[zi[u]]=c[u].offsetWidth,i[zi[u]]=c[u].offsetHeight;return[2,Ji.filter(function(e){return l(d[e])})]})})})},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return ii(this,void 0,void 0,function(){var e,n,r,i,s;return si(this,function(a){switch(a.label){case 0:return Ri()||Fi()?(o=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',o("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",o("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",o("LnNwb25zb3JpdA=="),".ylamainos",o("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",o("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",o("LmhlYWRlci1ibG9ja2VkLWFk"),o("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",o("I2FkXzMwMFgyNTA="),o("I2Jhbm5lcmZsb2F0MjI="),o("I2NhbXBhaWduLWJhbm5lcg=="),o("I0FkLUNvbnRlbnQ=")],adGuardChinese:[o("LlppX2FkX2FfSA=="),o("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",o("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),o("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",o("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",o("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",o("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),o("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),o("LmFkZ29vZ2xl"),o("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[o("YW1wLWF1dG8tYWRz"),o("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",o("I2FkX2ludmlld19hcmVh")],adGuardRussian:[o("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),o("LnJlY2xhbWE="),'div[id^="smi2adblock"]',o("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[o("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),o("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",o("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),o("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),o("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",o("I3Jla2xhbWk="),o("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),o("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),o("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[o("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",o("LndpZGdldF9wb19hZHNfd2lkZ2V0"),o("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",o("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[o("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),o("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",o("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",o("I3Jla2xhbW5pLWJveA=="),o("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",o("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[o("I2FkdmVydGVudGll"),o("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",o("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",o("LnNwb25zb3JsaW5rZ3J1ZW4="),o("I3dlcmJ1bmdza3k="),o("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),o("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[o("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",o("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[o("LnJla2xhbW9zX3RhcnBhcw=="),o("LnJla2xhbW9zX251b3JvZG9z"),o("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),o("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),o("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[o("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[o("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),o("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",o("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[o("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),o("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),o("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",o("LmFkX19tYWlu"),o("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[o("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[o("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),o("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[o("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),o("I2xpdmVyZUFkV3JhcHBlcg=="),o("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),o("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[o("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",o("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),o("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),o("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[o("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),o("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),o("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",o("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),o("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),o("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),o("ZGl2I3NrYXBpZWNfYWQ=")],ro:[o("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),o("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),o("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[o("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),o("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),o("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",o("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),o("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",o("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},n=Object.keys(e),[4,es((s=[]).concat.apply(s,n.map(function(t){return e[t]})))]):[2,void 0];case 1:return r=a.sent(),t&&function(e,t){for(var n="DOM blockers debug:\n```",r=0,i=Object.keys(e);r<i.length;r++){var s=i[r];n+="\n".concat(s,":");for(var a=0,o=e[s];a<o.length;a++){var l=o[a];n+="\n  ".concat(t[l]?"🚫":"➡️"," ").concat(l)}}console.log("".concat(n,"\n```"))}(e,r),(i=n.filter(function(t){var n=e[t];return gi(n.map(function(e){return r[e]}))>.6*n.length})).sort(),[2,i]}var o})})},fontPreferences:function(){return function(e,t){void 0===t&&(t=4e3);return Bi(function(n,r){var i=r.document,s=i.body,a=s.style;a.width="".concat(t,"px"),a.webkitTextSizeAdjust=a.textSizeAdjust="none",Ni()?s.style.zoom="".concat(1/r.devicePixelRatio):Ri()&&(s.style.zoom="reset");var o=i.createElement("div");return o.textContent=ai([],Array(t/20|0),!0).map(function(){return"word"}).join(" "),s.appendChild(o),e(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}(function(e,t){for(var n={},r={},i=0,s=Object.keys(ds);i<s.length;i++){var a=s[i],o=ds[a],l=o[0],c=void 0===l?{}:l,d=o[1],u=void 0===d?"mmMwWLliI0fiflO&1":d,h=e.createElement("span");h.textContent=u,h.style.whiteSpace="nowrap";for(var f=0,p=Object.keys(c);f<p.length;f++){var m=p[f],g=c[m];void 0!==g&&(h.style[m]=g)}n[a]=h,t.append(e.createElement("br"),h)}for(var v=0,y=Object.keys(ds);v<y.length;v++){r[a=y[v]]=n[a].getBoundingClientRect().width}return r})},audio:function(){return Ri()&&Ui()&&Mi()||Ni()&&(e=navigator,t=window,n=Audio.prototype,r=t.visualViewport,gi(["srLatency"in n,"srChannelCount"in n,"devicePosture"in e,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3)&&function(){var e=window,t=e.URLPattern;return gi(["union"in Set.prototype,"Iterator"in e,t&&"hasRegExpGroups"in t.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}()?-4:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(Ri()&&!Di()&&!function(){var e=window;return gi(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=4500,r=new t(1,5e3,44100),i=r.createOscillator();i.type="triangle",i.frequency.value=1e4;var s=r.createDynamicsCompressor();s.threshold.value=-50,s.knee.value=40,s.ratio.value=12,s.attack.value=0,s.release.value=.25,i.connect(s),s.connect(r.destination),i.start(0);var a=function(e){var t=3,n=500,r=500,i=5e3,s=function(){},a=new Promise(function(a,o){var l=!1,c=0,d=0;e.oncomplete=function(e){return a(e.renderedBuffer)};var u=function(){setTimeout(function(){return o(Wi("timeout"))},Math.min(r,d+i-Date.now()))},h=function(){try{var r=e.startRendering();switch(ci(r)&&hi(r),e.state){case"running":d=Date.now(),l&&u();break;case"suspended":document.hidden||c++,l&&c>=t?o(Wi("suspended")):setTimeout(h,n)}}catch(Ms){o(Ms)}};h(),s=function(){l||(l=!0,d>0&&u())}});return[a,s]}(r),o=a[0],l=a[1],c=hi(o.then(function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(n))},function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return function(){return l(),c}}();var e,t,n,r},screenFrame:function(){var e=this;if(Ri()&&Ui()&&Mi())return function(){return Promise.resolve(void 0)};var t=Xi();return function(){return ii(e,void 0,void 0,function(){var e,n;return si(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:vi(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}})})}},canvas:function(){return function(e){var t,n,r,i=!1,s=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),a=s[0],o=s[1];!function(e,t){return!(!t||!e.toDataURL)}(a,o)?n=r="unsupported":(i=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(o),e?n=r="skipped":(t=function(e,t){!function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(e,t);var n=qi(e),r=qi(e);if(n!==r)return["unstable","unstable"];!function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var i=r[n],s=i[0],a=i[1],o=i[2];t.fillStyle=s,t.beginPath(),t.arc(a,o,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(e,t);var i=qi(e);return[i,n]}(a,o),n=t[0],r=t[1]));return{winding:i,geometry:n,text:r}}(Ri()&&Ui()&&Mi())},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))Ni()&&gi([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var i=t.languages;i&&n.push(i.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return mi(pi(navigator.deviceMemory),void 0)},screenResolution:function(){var e,t,n;if(!(Ri()&&Ui()&&Mi()))return e=screen,(n=[(t=function(e){return mi(fi(e),null)})(e.width),t(e.height)]).sort().reverse(),n},hardwareConcurrency:function(){return mi(fi(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,i=(r=(new Date).getFullYear(),-Math.max(pi(new Date(r,0,1).getTimezoneOffset()),pi(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(i>=0?"+":"").concat(i)},sessionStorage:function(){try{return!!window.sessionStorage}catch(Ms){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){var e,t;if(!(Ci()||(e=window,t=navigator,gi(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!Ci())))try{return!!window.indexedDB}catch(n){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&Ri()&&!Di()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return gi(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var i=[],s=0;s<r.length;++s){var a=r[s];i.push({type:a.type,suffixes:a.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:i})}}return t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=fi(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(r){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],i=window[r];i&&"object"==typeof i&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(n){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}},invertedColors:function(){return!!ns("inverted")||!ns("none")&&void 0},forcedColors:function(){return!!rs("active")||!rs("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return is("no-preference")?0:is("high")||is("more")?1:is("low")||is("less")?-1:is("forced")?10:void 0},reducedMotion:function(){return!!ss("reduce")||!ss("no-preference")&&void 0},reducedTransparency:function(){return!!as("reduce")||!as("no-preference")&&void 0},hdr:function(){return!!os("high")||!os("standard")&&void 0},math:function(){var e,t=ls.acos||cs,n=ls.acosh||cs,r=ls.asin||cs,i=ls.asinh||cs,s=ls.atanh||cs,a=ls.atan||cs,o=ls.sin||cs,l=ls.sinh||cs,c=ls.cos||cs,d=ls.cosh||cs,u=ls.tan||cs,h=ls.tanh||cs,f=ls.exp||cs,p=ls.expm1||cs,m=ls.log1p||cs;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,ls.log(e+ls.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:i(1),asinhPf:function(e){return ls.log(e+ls.sqrt(e*e+1))}(1),atanh:s(.5),atanhPf:function(e){return ls.log((1+e)/(1-e))/2}(.5),atan:a(.5),sin:o(-1e300),sinh:l(1),sinhPf:function(e){return ls.exp(e)-1/ls.exp(e)/2}(1),cos:c(10.000000000123),cosh:d(1),coshPf:function(e){return(ls.exp(e)+1/ls.exp(e))/2}(1),tan:u(-1e300),tanh:h(1),tanhPf:function(e){return(ls.exp(2*e)-1)/(ls.exp(2*e)+1)}(1),exp:f(1),expm1:p(1),expm1Pf:function(e){return ls.exp(e)-1}(1),log1p:m(10),log1pPf:function(e){return ls.log(1+e)}(10),powPI:function(e){return ls.pow(ls.PI,e)}(-100)}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]},applePay:function(){var e=window.ApplePaySession;if("function"!=typeof(null==e?void 0:e.canMakePayments))return-1;if(us())return-3;try{return e.canMakePayments()?1:0}catch(Ms){return function(e){if(e instanceof Error&&"InvalidAccessError"===e.name&&/\bfrom\b.*\binsecure\b/i.test(e.message))return-2;throw e}(Ms)}},privateClickMeasurement:function(){var e,t=document.createElement("a"),n=null!==(e=t.attributionSourceId)&&void 0!==e?e:t.attributionsourceid;return void 0===n?void 0:String(n)},audioBaseLatency:function(){if(!(Fi()||Ri()))return-2;if(!window.AudioContext)return-1;var e=(new AudioContext).baseLatency;return null==e?-1:isFinite(e)?e:-3},dateTimeLocale:function(){if(!window.Intl)return-1;var e=window.Intl.DateTimeFormat;if(!e)return-2;var t=e().resolvedOptions().locale;return t||""===t?t:-3},webGlBasics:function(e){var t,n,r,i,s,a,o=vs(e.cache);if(!o)return-1;if(!ks(o))return-2;var l=_s()?null:o.getExtension(gs);return{version:(null===(t=o.getParameter(o.VERSION))||void 0===t?void 0:t.toString())||"",vendor:(null===(n=o.getParameter(o.VENDOR))||void 0===n?void 0:n.toString())||"",vendorUnmasked:l?null===(r=o.getParameter(l.UNMASKED_VENDOR_WEBGL))||void 0===r?void 0:r.toString():"",renderer:(null===(i=o.getParameter(o.RENDERER))||void 0===i?void 0:i.toString())||"",rendererUnmasked:l?null===(s=o.getParameter(l.UNMASKED_RENDERER_WEBGL))||void 0===s?void 0:s.toString():"",shadingLanguageVersion:(null===(a=o.getParameter(o.SHADING_LANGUAGE_VERSION))||void 0===a?void 0:a.toString())||""}},webGlExtensions:function(e){var t=vs(e.cache);if(!t)return-1;if(!ks(t))return-2;var n=t.getSupportedExtensions(),r=t.getContextAttributes(),i=[],s=[],a=[],o=[],l=[];if(r)for(var c=0,d=Object.keys(r);c<d.length;c++){var u=d[c];s.push("".concat(u,"=").concat(r[u]))}for(var h=0,f=bs(t);h<f.length;h++){var p=t[_=f[h]];a.push("".concat(_,"=").concat(p).concat(hs.has(p)?"=".concat(t.getParameter(p)):""))}if(n)for(var m=0,g=n;m<g.length;m++){var v=g[m];if(!(v===gs&&_s()||"WEBGL_polygon_mode"===v&&xs())){var y=t.getExtension(v);if(y)for(var b=0,w=bs(y);b<w.length;b++){var _;p=y[_=w[b]];o.push("".concat(_,"=").concat(p).concat(fs.has(p)?"=".concat(t.getParameter(p)):""))}else i.push(v)}}for(var x=0,k=ps;x<k.length;x++)for(var j=k[x],S=0,E=ms;S<E.length;S++){var T=E[S],I=ys(t,j,T);l.push("".concat(j,".").concat(T,"=").concat(I.join(",")))}return o.sort(),a.sort(),{contextAttributes:s,parameters:a,shaderPrecisions:l,extensions:n,extensionParameters:o,unsupportedExtensions:i}}};function Ss(e){var t=function(e){if(Fi())return.4;if(Ri())return!Di()||Ui()&&Mi()?.3:.5;var t="value"in e.platform?e.platform.value:"";if(/^Win/.test(t))return.6;if(/^Mac/.test(t))return.5;return.7}(e),n=function(e){return vi(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(n))}}function Es(e){return JSON.stringify(e,function(e,t){return t instanceof Error?ri({name:(n=t).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):t;var n,r},2)}function Ts(e){return Ai(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var i=r[n],s=e[i],a="error"in s?"error":JSON.stringify(s.value);t+="".concat(t?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(a)}return t}(e))}function Is(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise(function(e){return n.call(window,function(){return e()},{timeout:t})}):li(Math.min(e,t))}(e,2*e)}function Ls(e,t){var n=Date.now();return{get:function(r){return ii(this,void 0,void 0,function(){var i,s,a;return si(this,function(o){switch(o.label){case 0:return i=Date.now(),[4,e()];case 1:return s=o.sent(),a=function(e){var t,n=Ss(e);return{get visitorId(){return void 0===t&&(t=Ts(this.components)),t},set visitorId(e){t=e},confidence:n,components:e,version:oi}}(s),(t||(null==r?void 0:r.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(a.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(i-n,"\nvisitorId: ").concat(a.visitorId,"\ncomponents: ").concat(Es(s),"\n```")),[2,a]}})})}}}var Ps={load:function(e){var t;return void 0===e&&(e={}),ii(this,void 0,void 0,function(){var n,r,i;return si(this,function(s){switch(s.label){case 0:return(null===(t=e.monitoring)||void 0===t||t)&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(oi,"/npm-monitoring"),!0),e.send()}catch(Ms){console.error(Ms)}}(),n=e.delayFallback,r=e.debug,[4,Is(n)];case 1:return s.sent(),i=function(e){return Oi(js,e,[])}({cache:{},debug:r}),[2,Ls(i,r)]}})})},hashComponents:Ts,componentsToDebugString:Es};let As=null;const Os=(()=>{let e=null;return async()=>e||(e=await(async()=>{try{As||(As=Ps.load());const e=await As;return(await e.get()).visitorId}catch(Ms){return console.error("Error generating fingerprint:",Ms),Math.random().toString(36).slice(2)+Date.now().toString(36)}})(),e)})();const Cs=()=>{const[e,t]=a.useState([]),[n,r]=a.useState(null);a.useEffect(()=>{(async()=>{const e=await Os();r(e)})()},[]);const i=e=>{if(!e)return null;const{data:{publicUrl:t}}=Dr.storage.from("aakarshika-visitors").getPublicUrl(e);return t},s=async()=>{try{const{data:e,error:n}=await Dr.from("visitor_fingerprints").select("*").order("created_at",{ascending:!1}).limit(20);if(n)throw n;const r=e.map(e=>({src:i(e.object_name),filter:e.filter,fingerprint:e.fingerprint,object_name:e.object_name,id:e.id,message:e.message||""}));Array(5).fill(0).forEach(()=>{r.push({src:"heart",filter:"none"})}),Array(40-r.length).fill(0).forEach(()=>{r.push({src:"blank",filter:"none"})}),Array(75-r.length).fill(0).forEach(()=>{r.push(r[Math.floor(Math.random()*r.length)])}),t(r.sort((e,t)=>Math.random()-.5))}catch(e){console.error("Error fetching visitor images:",e)}},o=async(e,t,r="")=>{if(!n)return console.warn("Fingerprint not ready yet, retrying..."),void setTimeout(()=>o(e,t,r),100);const i=function(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,s=new Uint8Array(i);for(let a=0;a<i;a++)s[a]=r.charCodeAt(a);return new Blob([s],{type:n})}(e),a=`${Date.now()}_${n}.jpg`;try{const{error:e}=await Dr.storage.from("aakarshika-visitors").upload(a,i,{cacheControl:"3600",upsert:!1});if(e)throw e;const{error:o}=await Dr.from("visitor_fingerprints").insert({fingerprint:n,object_name:a,filter:t,message:r.trim()});if(o)throw o;await s()}catch(l){console.error("Error uploading visitor picture:",l)}};return a.useEffect(()=>{s()},[]),{picturesList:e,handleCapture:o,handleDelete:async(e,t)=>{if(n)try{const{error:n}=await Dr.storage.from("aakarshika-visitors").remove([e]);if(n)throw n;const{error:r}=await Dr.from("visitor_fingerprints").delete().eq("id",t);if(r)throw r;await s()}catch(r){console.error("Error deleting image:",r)}else console.warn("Fingerprint not ready yet")},fingerprint:n}},Ns=()=>{const{picturesList:t,handleCapture:n,handleDelete:r,fingerprint:i}=Cs(),s=[{id:"hero",componentType:"none",componentFun:()=>e.jsx(Fr,{progress:"hero"==c?d:0}),ref:a.useRef(null)},{id:"about-me",componentType:"none",componentFun:()=>e.jsx(F,{progress:"about-me"==c?d:0}),ref:a.useRef(null)},{id:"projects",componentType:"horizontalStopper",componentFun:()=>e.jsx(C,{}),ref:a.useRef(null)},{id:"skill-graph",componentType:"customHorizontalStopper",getFun:"SkillGraph",ref:a.useRef(null)},{id:"interactive",componentType:"none",componentFun:()=>e.jsx($r,{progress:"interactive"==c?d:0,pictures:t,onCapture:n,currentFingerprint:i,onDelete:r}),ref:a.useRef(null)},{id:"contact",componentType:"none",componentFun:()=>e.jsx(Vr,{}),ref:a.useRef(null)}],{scrollY:o,activeStopperId:l,activePageName:c,pageProgress:d,handleScrollHandoff:u,handleHover:h}=(({stoppersConfig:e})=>{const[t,n]=a.useState(!0),[r,i]=a.useState("projects"),s=e.length,o=window.innerHeight,l=s*window.innerHeight-window.innerHeight,[c,d]=a.useState(0),[u,h]=a.useState(0),[f,p]=a.useState(null),m=a.useRef(f),[g,v]=a.useState(null),[y,b]=a.useState(0),[w,_]=a.useState([]),[x,k]=a.useState(null),[j,S]=a.useState(null),E=[];for(let a=0;a<e.length;a++){const t=e[a],n=a*o,r=(a+1)*o,i=(n+r)/2;E.push({...t,id:t.id,center:i,top:n,bottom:r})}return a.useEffect(()=>{m.current=f},[f]),a.useEffect(()=>{var e,n;const i=c+o/2,s=i%o/o*100;b(s);const a=E.find(e=>i>e.top&&i<e.bottom),l=E.find(e=>i>e.top&&i<e.bottom),d=E.filter(e=>i>e.top-100&&i<e.bottom+100&&e.id!==(null==l?void 0:l.id));l?(v(null==l?void 0:l.id),l.id):(v(null),null==(e=d[0])||e.id,null==(n=d[1])||n.id),l&&i>l.center-100&&i<l.center+100&&["horizontalStopper","customHorizontalStopper"].some(e=>e==l.componentType)?p(l.id):p(null),("next"==j&&s>=45||"previous"==j&&s<=55)&&!w.find(e=>e.direction==j&&e.stopperId==(null==a?void 0:a.id))&&["horizontalStopper","customHorizontalStopper"].some(e=>e==(null==a?void 0:a.componentType))&&t&&r==a.id?k(a):k(null)},[c,t]),a.useEffect(()=>{document.body.style.overflow="hidden",document.body.style.height="100vh";const e=e=>{S(e>0?"next":"previous");const n=Math.max(-250,Math.min(250,e));d(i=>{const s=e>0?"next":"previous",a=i+n,c=a+o/2,d=E.find(e=>c>e.top&&c<e.bottom);if(d){const e=c%o/o*100;let n=!1;if(("next"==s&&e>=50||"previous"==s&&e<=50)&&!w.find(e=>e.direction==s&&e.stopperId==(null==d?void 0:d.id))&&["horizontalStopper","customHorizontalStopper"].some(e=>e==d.componentType)&&t&&r==d.id&&(n=!0),n||x)return d.top}return Math.max(0,Math.min(a,l))})};let n=0;const i=R(null,{wheel:t=>{e(t.deltaY)},touchStart:e=>{n=e.touches[0].clientY},touchMove:t=>{const r=n-t.touches[0].clientY;e(r),n=t.touches[0].clientY}},{useWindow:!0});return()=>{i(),document.body.style.overflow="",document.body.style.height=""}},[f,e,t]),{scrollY:c,activeStopperId:f,activePageName:g,pageProgress:y,handleScrollHandoff:(e,t)=>{_([{direction:e,stopperId:t}]),k(null),p(null)},handoffsReceived:w,handleHover:(e,t)=>{console.log("handleHover",e,t),n(e),i(t)}}})({stoppersConfig:s});return e.jsx("div",{className:"fixed inset-0 bg-black text-white overflow-hidden",children:e.jsx("div",{className:"relative w-full",style:{transform:`translateY(-${o}px)`},children:s.map((t,n)=>"horizontalStopper"===t.componentType?e.jsx("div",{ref:t.ref,children:e.jsx(M,{id:t.id,isActive:l===t.id,progress:c==t.id?d:0,onScrollHandoff:e=>u(e,t.id),content:e.jsx(t.componentFun,{}),handleHover:h})},t.id+" "+n):"customHorizontalStopper"===t.componentType?e.jsx("div",{ref:t.ref,children:"SkillGraph"===t.getFun?e.jsx(ni,{isActive:l===t.id,onScrollHandoff:e=>{u(e,t.id)},scrollY:o,handleHover:h}):e.jsx("div",{})},t.id+" "+n):e.jsx("div",{ref:t.ref,children:e.jsx(t.componentFun,{})},t.id+" "+n))})})},Rs=()=>e.jsx(d,{children:e.jsx(u,{path:"/",element:e.jsx(Ns,{})})}),Ds=()=>(a.useEffect(()=>{w.isNativePlatform()&&(O.setOverlaysWebView({overlay:!0}),O.setStyle({style:I.Light}))},[]),e.jsx(h,{children:e.jsx(Rs,{})}));g.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(Ds,{})}));
//# sourceMappingURL=index-DaozCjrY.js.map
